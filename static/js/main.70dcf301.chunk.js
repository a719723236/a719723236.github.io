(this.webpackJsonpjira2=this.webpackJsonpjira2||[]).push([[1],{114:function(t,n,e){"use strict";e.d(n,"b",(function(){return d})),e.d(n,"c",(function(){return b})),e.d(n,"a",(function(){return p}));var r=e(58),a=e(38),c=e(18),u=e.n(c),o=e(42),i=e(239),s=e(106),f=function(t,n,e){var r=Object(s.b)();return{onSuccess:function(){r.invalidateQueries(t)},onMutate:function(e){return Object(o.a)(u.a.mark((function a(){var c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.cancelQueries(t),c=r.getQueryData(t),r.setQueryData(t,(function(t){return n(e,t)})),a.abrupt("return",{previousItems:c});case 4:case"end":return a.stop()}}),a)})))()},onError:function(n,a,c){e&&e(),r.setQueryData(t,c.previousItems)}}},l=function(t,n){return function(){return i.a.warning({title:t,content:n})}},d=function(t){return f(t,(function(t,n){return(null===n||void 0===n?void 0:n.filter((function(n){return n.id!==t.id})))||[]}),l("\u672a\u77e5\u9519\u8bef","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u8fdb\u884c\uff01"))},b=function(t){return f(t,(function(t,n){return(null===n||void 0===n?void 0:n.map((function(n){return n.id===t.id?Object(a.a)(Object(a.a)({},n),t):n})))||[]}),l("\u672a\u77e5\u9519\u8bef","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u8fdb\u884c\uff01"))},p=function(t){return f(t,(function(t,n){return n?[].concat(Object(r.a)(n),[t]):[]}),l("\u672a\u77e5\u9519\u8bef","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u8fdb\u884c\uff01"))}},182:function(t,n,e){"use strict";e.d(n,"f",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return f})),e.d(n,"e",(function(){return l})),e.d(n,"b",(function(){return d})),e.d(n,"d",(function(){return b}));var r=e(61),a=e(240),c=e(160),u=e(114),o=e(84),i=function(t){var n=Object(r.b)();return Object(a.a)(["projects",Object(o.a)(t)],(function(){return n("projects",{data:t})}))},s=function(t){var n=Object(r.b)(),e=Object(u.c)(t);return Object(c.a)((function(t){return n("projects/".concat(t.id),{method:"PATCH",data:t})}),e)},f=function(t){var n=Object(r.b)();return Object(c.a)((function(t){return n("projects",{data:t,method:"POST"})}),Object(u.a)(t))},l=function(t){var n=Object(r.b)();return Object(a.a)(["project",t],(function(){return n("projects/".concat(t))}),{enabled:!!t})},d=function(t){var n=Object(r.b)();return Object(c.a)("projects",(function(t){var e=t.id;return n("projects/".concat(e),{method:"DELETE"})}),Object(u.b)(t))},b=function(t){var n=Object(r.b)(),e=Object(u.c)(t);return Object(c.a)((function(t){return n("tasks/".concat(t.id),{method:"PATCH",data:t})}),e)}},186:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e(38),a=e(30),c=e(0),u=e(84),o={stat:"idle",data:null,error:null},i={throwOnError:!1},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,e=Object(c.useState)(Object(r.a)(Object(r.a)({},o),t)),s=Object(a.a)(e,2),f=s[0],l=s[1],d=Object(c.useCallback)((function(t){return l({data:t,stat:"success",error:null})}),[]),b=Object(c.useCallback)((function(t){return l({data:null,stat:"error",error:t})}),[]),p=Object(u.g)(),j=Object(c.useState)((function(){return function(){}})),m=Object(a.a)(j,2),v=m[0],O=m[1],h=Object(c.useCallback)((function(t,e){if(!t||!t.then())throw new Error("\u8bf7\u4f20\u5165Promise\u7c7b\u578b\u6570\u636e");return l((function(t){return Object(r.a)(Object(r.a)({},t),{},{stat:"loading"})})),O((function(){return function(){return e&&h(e.retry(),e)}})),t.then((function(t){return p.current&&d(t),t})).catch((function(t){return b(t),n.throwOnError?Promise.reject(t):t}))}),[n.throwOnError,p,d,b]);return Object(r.a)({isIdle:"idle"===f.stat,isLoading:"loading"===f.stat,isSuccess:"success"===f.stat,isError:"error"===f.stat,run:h,setData:d,setError:b,retry:v},f)}},408:function(t,n){},412:function(t,n,e){},414:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),c=e(24),u=e.n(c),o=e(86),i=(e(412),e(137)),s=e(235),f=e(138),l=e(153),d=function(t){Object(f.a)(e,t);var n=Object(l.a)(e);function e(){var t;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=n.call.apply(n,[this].concat(a))).state={error:null},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this.state.error,n=this.props,e=n.fallbackRender,r=n.children;return t?e({error:t}):r}}],[{key:"getDerivedStateFromError",value:function(t){return{error:t}}}]),e}(a.a.Component),b=e(85),p=a.a.lazy((function(){return Promise.all([e.e(0),e.e(4),e.e(5)]).then(e.bind(null,445))})),j=a.a.lazy((function(){return Promise.all([e.e(0),e.e(6)]).then(e.bind(null,448))}));var m=function(){var t=Object(o.b)().user;return a.a.createElement("div",{className:"App"},a.a.createElement(d,{fallbackRender:b.c},a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(b.d,null)},t?a.a.createElement(p,null):a.a.createElement(j,null))))},v=function(t){t&&t instanceof Function&&e.e(7).then(e.bind(null,443)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,u=n.getTTFB;e(t),r(t),a(t),c(t),u(t)}))},O=e(122),h=(e(413),e(106)),g=e(419),E=function(t){var n=t.children;return a.a.createElement(h.a,{client:new g.a},a.a.createElement(o.a,null,n))},w=e(124),k=e(58),y=[];setInterval((function(){if(0!==y.length){var t=Object(k.a)(y);y=[],console.log(t)}}),5e3);var x=function(t){var n=t.metadata,e=t.phases,r=Object(w.a)(t,["metadata","phases"]);return a.a.createElement(a.a.Profiler,Object.assign({onRender:function(t,r,a,c,u,o,i){e&&!e.includes(r)||y.push({id:t,phase:r,actualDuration:a,baseDuration:c,startTime:u,commitTime:o,interactions:i,metadata:n})}},r))};Object(O.b)((function(){return u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,{id:"Root App",phases:["mount"]},a.a.createElement(E,null,a.a.createElement(O.a,null),a.a.createElement(m,null)))),document.getElementById("root"))})),v()},61:function(t,n,e){"use strict";e.d(n,"a",(function(){return b})),e.d(n,"b",(function(){return p}));var r=e(18),a=e.n(r),c=e(38),u=e(124),o=e(42),i=e(234),s=e(0),f=e(82),l=e(86),d="https://online.com",b=function(){var t=Object(o.a)(a.a.mark((function t(n){var e,r,s,l,b,p=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.length>1&&void 0!==p[1]?p[1]:{},r=e.data,s=e.token,e.headers,l=Object(u.a)(e,["data","token","headers"]),"GET"===(b=Object(c.a)({method:"GET",headers:{Authorization:s?"Bearer ".concat(s):"","Content-Type":r?"application/json":""}},l)).method.toUpperCase()?n+="?".concat(i.stringify(r)):b.body=JSON.stringify(r||{}),t.abrupt("return",window.fetch("".concat(d,"/").concat(n),b).then(function(){var t=Object(o.a)(a.a.mark((function t(n){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==n.status){t.next=5;break}return t.next=3,f.c();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"}));case 5:return t.next=7,n.json();case 7:if(e=t.sent,!n.ok){t.next=12;break}return t.abrupt("return",e);case 12:return t.abrupt("return",Promise.reject(e));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=Object(l.b)().user;return Object(s.useCallback)((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var a=e[0],u=e[1];return b(a,Object(c.a)(Object(c.a)({},u),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},82:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return f})),e.d(n,"d",(function(){return l})),e.d(n,"c",(function(){return d}));var r=e(18),a=e.n(r),c=e(42),u="__auth_provider_token__",o="https://online.com",i=function(){return window.localStorage.getItem(u)},s=function(t){var n=t.user;return window.localStorage.setItem(u,n.token||""),n},f=function(t){return fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},l=function(t){return fetch("".concat(o,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},d=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(u));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},84:function(t,n,e){"use strict";e.d(n,"a",(function(){return s})),e.d(n,"f",(function(){return f})),e.d(n,"d",(function(){return l})),e.d(n,"e",(function(){return d})),e.d(n,"c",(function(){return b})),e.d(n,"g",(function(){return p})),e.d(n,"h",(function(){return j})),e.d(n,"i",(function(){return m})),e.d(n,"b",(function(){return v}));e(58);var r=e(30),a=e(38),c=e(239),u=e(0),o=e(180),i=e(182),s=function(t){if(!t)return{};var n=Object(a.a)({},t);return Object.keys(t).forEach((function(e){(function(t){return void 0===t||null===t||""===t})(t[e])&&delete n[e]})),n},f=function(t){Object(u.useEffect)((function(){t()}),[])},l=function(t,n){var e=Object(u.useState)(t),a=Object(r.a)(e,2),c=a[0],o=a[1];return Object(u.useEffect)((function(){var e=setTimeout((function(){o(t)}),n);return function(){return clearTimeout(e)}}),[t,n]),c},d=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=Object(u.useRef)(document.title).current;Object(u.useEffect)((function(){document.title=t}),[t]),Object(u.useEffect)((function(){return function(){n||(document.title=e)}}),[n,e])},b=function(){return window.location.href=window.location.origin},p=function(){var t=Object(u.useRef)(!1);return Object(u.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),t},j=function(){var t,n=null===(t=Object(o.g)().pathname.match(/projects\/(\d+)\//))||void 0===t?void 0:t[1];return Number(n)},m=function(){return Object(i.e)(j())},v=function(t,n,e,r){c.a.confirm({title:e,content:r,onOk:function(){t({id:n})},cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",maskClosable:!0})}},85:function(t,n,e){"use strict";e.d(n,"e",(function(){return j})),e.d(n,"d",(function(){return v})),e.d(n,"c",(function(){return O})),e.d(n,"a",(function(){return h})),e.d(n,"b",(function(){return g})),e.d(n,"f",(function(){return E}));var r,a,c,u,o=e(109),i=e(110),s=e(241),f=e(89),l=e(415),d=e(122),b=e(0),p=e.n(b),j=i.a.div(r||(r=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),m=i.a.div(a||(a=Object(o.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),v=function(){return p.a.createElement(m,null,p.a.createElement(s.a,{size:"large"}))},O=function(t){var n=t.error;return p.a.createElement(m,null,p.a.createElement(d.a,null),p.a.createElement(g,{error:n}))},h=Object(i.a)(f.a)(c||(c=Object(o.a)(["\n  padding: 0;\n"]))),g=function(t){var n,e=t.error;return(null===(n=e)||void 0===n?void 0:n.message)?p.a.createElement(l.a.Text,{type:"danger"},e.message):null},E=i.a.div(u||(u=Object(o.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"])))},86:function(t,n,e){"use strict";e.d(n,"a",(function(){return m})),e.d(n,"b",(function(){return v}));var r=e(18),a=e.n(r),c=e(42),u=e(0),o=e.n(u),i=e(106),s=e(82),f=e(85),l=e(84),d=e(61),b=e(186),p=function(){var t=Object(c.a)(a.a.mark((function t(){var n,e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,!(e=s.a())){t.next=7;break}return t.next=5,Object(d.a)("me",{token:e});case 5:r=t.sent,n=r.user;case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=o.a.createContext(void 0);j.displayName="AuthContext";var m=function(t){var n=t.children,e=Object(i.b)(),r=Object(b.a)(),a=r.data,c=r.error,u=r.isLoading,d=r.isIdle,m=r.isError,v=r.run,O=r.setData;return Object(l.f)((function(){v(p())})),d||u?o.a.createElement(f.d,null):m?o.a.createElement(f.c,{error:c}):o.a.createElement(j.Provider,{children:n,value:{user:a,login:function(t){return s.b(t).then(O)},register:function(t){return s.d(t).then(O)},logout:function(){return s.c().then((function(){O(null),e.clear()}))}}})},v=function(){var t=o.a.useContext(j);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}}},[[414,2,3]]]);
//# sourceMappingURL=main.70dcf301.chunk.js.map