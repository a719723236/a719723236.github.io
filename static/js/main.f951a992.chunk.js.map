{"version":3,"sources":["components/lib.tsx","components/verifyInput.tsx","auth-provider.ts","utils/unauthenticated.ts","unauthenticated-app/login.tsx","assets/logo.svg","assets/left.svg","assets/right.svg","unauthenticated-app/register.tsx","unauthenticated-app/index.tsx","assets/software-logo.svg","components/loading.tsx","components/popOver.tsx","utils/http.ts","utils/use-optimistic-options.ts","utils/project.ts","utils/index.ts","utils/url.ts","screens/project-list/util.ts","utils/user.ts","components/pin.tsx","screens/project-list/list.tsx","screens/project-list/list-header.tsx","components/id-select.tsx","screens/project-list/search-panel.tsx","screens/project-list/index.tsx","utils/kanban.ts","utils/task.ts","utils/task-type.ts","screens/kanban/util.ts","screens/kanban/edit-task.tsx","assets/bug.svg","assets/task.svg","screens/kanban/create-task.tsx","screens/kanban/kanban-list.tsx","screens/kanban/kanban-search-panel.tsx","screens/kanban/index.tsx","screens/epic/util.ts","screens/epic/create-epic.tsx","utils/epic.ts","screens/epic/epicRow.tsx","screens/epic/index.tsx","screens/project/index.tsx","screens/project-list/create-project-Drawer.tsx","authenticated-app.tsx","App.tsx","reportWebVitals.ts","context/auth_context.tsx","context/index.tsx","index.tsx"],"names":["confirm","Modal","ErrorBox","value","error","message","Text","type","NoPaddingBtn","props","style","padding","children","deleteConfirm","callBack","title","icon","ExclamationCircleOutlined","content","cancelText","okText","maskClosable","onOk","success","VerifyInput","name","placeholder","isPassword","rules","remindProps","Item","required","Password","localStorageKey","apiUrl","process","getToken","window","localStorage","getItem","handleUserResponse","user","setItem","token","logout","a","removeItem","useUserLogin","useMutation","loginData","data","fetch","method","headers","body","JSON","stringify","then","response","ok","json","Promise","reject","useUserRegister","Form","LoginScreen","changeLoginState","login","mutateAsync","isLoading","handleLogin","authForm","location","reload","Title","level","onFinish","loading","htmlType","block","onClick","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x1","y1","x2","y2","id","stopColor","offset","stroke","strokeWidth","fillRule","d","fill","SvgLogo","_ref","svgRef","titleId","viewBox","xmlns","focusable","ref","ForwardRef","RegisterScreen","client","useQueryClient","register","mutate","isSuccess","refetchQueries","dependencies","getFieldValue","validator","_","val","console","log","resolve","Error","UnauthenticatedSreen","useState","isLogin","setIsLogin","Container","Background","width","marginBottom","ShadowCard","styled","div","Left","Right","Card","SvgSoftwareLogo","className","ToggleLoading","size","MyPopOver","renderData","change","onVisibleChange","header","dataSource","renderItem","http","endpoint","costumConfig","config","Authorization","toUpperCase","qs","res","status","useHttp","useConfig","queryKey","queryClient","onSuccess","invalidateQueries","onMutate","param","cancelQueries","oldParam","getQueryData","setQueryData","old","onError","newItem","context","useEditConfig","map","item","useAddConfig","useDeleteConfig","filter","useProject","useQuery","refetchOnWindowFocus","useEditProject","params","useAddProject","bootstrapUser","clearObj","obj","newObj","forEach","useDebounce","delay","newParam","setNewParam","useEffect","timeId","setTimeout","clearTimeout","useQueryParams","projectId","useProjectIdInUrl","useUrlSearchParam","useSearchParams","setParam","useSetUrlParam","useMemo","reduce","x","y","get","searchParam","setSearchParam","fromEntries","useLocation","pathname","match","Number","useCreateDrawer","projectCreate","setProjectCreate","editingProjectId","setEditingProject","project","isError","isDrawerOpen","openProjectCreate","openProjectEdit","close","undefined","editingProject","useUsers","Pin","checked","onCheckedChange","restProps","count","onChange","num","Menu","ProjectList","projectList","users","editProject","deleteProject","useDeleteProject","pagination","rowKey","columns","disabled","render","pin","to","String","organization","find","personId","created","dayjs","format","placement","overlay","ListHeader","Option","Select","IdSelect","valueKey","nameKey","defalutName","toNumber","defaultValue","isNaN","SearchPanel","SearchPanelForm","initialValues","marginRight","evt","ProjectListScreen","projectLoading","projectError","isProjectLoading","marginTop","DIV","whyDidYouRender","useKanbanQueryKey","useTasks","useTaskTypes","useTaskParam","split","processorId","typeId","layout","labelCol","span","wrapperCol","EditTaskModal","taskType","editingTaskId","enabled","Boolean","useTask","editingTask","useEditTask","editLoading","deleteTask","useDeleteTask","useForm","form","handleClick","formVal","getFieldsValue","closeModal","setFieldsValue","visible","onCancel","confirmLoading","margin","label","textAlign","CreateTask","kanbanId","isCreate","setIsCreate","addKanban","useAddTask","autoFocus","onPressEnter","currentTarget","onBlur","KanbanList","taskList","useDeleteKanban","deleteKanban","KanbanListContainer","Span","task","TaskCard","alt","src","BugIcon","TaskIcon","KanbanSearch","display","marginLeft","resetFields","KanbanScreen","useKanbans","kanbanData","kanbanLoading","taskData","taskLoading","projectData","isTotalLoading","setVal","useAddKanban","KanbanContainer","KanbanContainerList","kanban","useEpicsQueryKey","CreateEpic","isOpen","setDrawerOpen","useAddEpic","handleFinish","onClose","destroyOnClose","forceRender","DrawerContainer","List","EpicRow","epic","tasks","currentProject","epicTasks","epicId","useDeleteEpic","EpicHead","fontSize","Time","start","end","epicTask","EpicScreen","useEpics","epics","epicLoading","isCreateEpicOpen","setIsCreateEpicOpen","EpicContainer","TotalEpicHeader","overflow","itemLayout","ProjectScreen","routeType","units","useRouteType","Aside","mode","selectedKeys","Main","path","element","replace","aside","CreateProjectDrawer","drawerTitle","closeDrawer","AuthenticatedApp","PageHeader","userInfo","projects","Header","HeaderLeft","height","footer","href","App","isUserLogin","Div","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AuthProvider","AppProviders","QueryClientProvider","QueryClient","loadServer","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f951a992.chunk.js","sourcesContent":["import { ExclamationCircleOutlined } from \"@ant-design/icons\";\r\nimport { Button, message, Modal, Typography } from \"antd\"\r\nimport React from \"react\"\r\n\r\nconst { confirm } = Modal;\r\n\r\nconst isError = (value: any): value is Error => value?.message;\r\n\r\nexport const ErrorBox = ({ error }: { error: unknown }) => {\r\n    if(isError(error)) {\r\n        return <Typography.Text type={\"danger\"}>{error?.message}</Typography.Text>\r\n    }\r\n    return null;\r\n}\r\n\r\nexport const NoPaddingBtn = (props: React.ComponentProps<typeof Button>) => {\r\n    return <Button {...props} style={{padding: \"0px\"}}>{props.children}</Button>\r\n}\r\n\r\n\r\nexport const deleteConfirm = (callBack: () => void, title: string) => {\r\n    confirm({\r\n      title,\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: '点击确定删除',\r\n      cancelText: \"取消\",\r\n      okText: \"确定\",\r\n      maskClosable: true,\r\n      onOk() {\r\n        callBack();\r\n        message.success(\"删除成功！\");\r\n      }\r\n    });\r\n  }","import { Form, Input } from \"antd\";\r\nimport { Rule } from \"antd/lib/form\";\r\nimport React from \"react\";\r\n\r\ntype InputProps = React.ComponentProps<typeof Form.Item>\r\n\r\ntype verifyProps = Omit<InputProps, \"rules\"> & {\r\n    message: string,\r\n    name: string,\r\n    placeholder: string,\r\n    isPassword?: boolean\r\n    rules?: Rule[]\r\n}\r\n\r\nexport const VerifyInput = ({message, name, placeholder, isPassword, rules, ...remindProps}: verifyProps) => {\r\n  return (\r\n    <Form.Item\r\n      name={name}\r\n      rules={[{ required: true, message }, ...(rules ? rules :  [])]}\r\n      {...remindProps}\r\n    >\r\n      {isPassword ? <Input.Password placeholder={placeholder} /> : <Input placeholder={placeholder} />}\r\n    </Form.Item>\r\n  );\r\n};\r\n","import { User } from \"./types/user\"\r\n\r\nconst localStorageKey = \"__auth_provider_token__\"\r\nconst apiUrl = process.env.REACT_APP_API_URL\r\n\r\nexport const getToken = () => window.localStorage.getItem(localStorageKey)\r\n\r\nexport const handleUserResponse = ({user}: {user: User}) => {\r\n    window.localStorage.setItem(localStorageKey, user.token || \"\")\r\n    return user\r\n}\r\n\r\nexport const login = (data: {username:string, password: string}) => {\r\n    return fetch(`${apiUrl}/login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data)\r\n    }).then(async (response) => {\r\n        if(response.ok) {\r\n            return handleUserResponse(await response.json())\r\n        } else {\r\n            return Promise.reject(await response.json())\r\n        }\r\n    })\r\n}\r\n\r\nexport const register = (data: {username:string, password: string}) => {\r\n    return fetch(`${apiUrl}/register`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data)\r\n    }).then(async response => {\r\n        if(response.ok) {\r\n            return handleUserResponse(await response.json())\r\n        } else {\r\n            return Promise.reject(await response.json())\r\n        }\r\n    })\r\n}\r\n\r\nexport const logout = async () => window.localStorage.removeItem(localStorageKey)","import { useMutation } from \"react-query\"\r\nimport { login, register } from \"../auth-provider\"\r\n\r\nexport interface AuthForm {\r\n    username: string,\r\n    password: string\r\n}\r\n\r\nexport const useUserLogin = () => {\r\n    return useMutation((loginData: AuthForm) => login(loginData))\r\n}\r\n\r\nexport const useUserRegister = () => {\r\n    return useMutation((loginData: AuthForm) => register(loginData))\r\n}","import { Button, Divider, Form, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport { ErrorBox } from \"../components/lib\";\r\nimport { VerifyInput } from \"../components/verifyInput\";\r\nimport { AuthForm, useUserLogin } from \"../utils/unauthenticated\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const LoginScreen = ({\r\n  changeLoginState,\r\n}: {\r\n  changeLoginState: (isLogin: boolean) => void;\r\n}) => {\r\n  const { mutateAsync: login, error, isLoading } = useUserLogin();\r\n\r\n  const handleLogin = async (authForm: AuthForm) => {\r\n    await login(authForm);\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Typography.Title level={3}>请登录</Typography.Title>\r\n      <ErrorBox error={error}></ErrorBox>\r\n      <Form onFinish={handleLogin}>\r\n        <VerifyInput\r\n          name=\"username\"\r\n          message=\"请输入用户名\"\r\n          placeholder=\"用户名\"\r\n        />\r\n        <VerifyInput\r\n          name=\"password\"\r\n          message=\"请输入密码\"\r\n          placeholder=\"密码\"\r\n          isPassword\r\n        />\r\n        <Item>\r\n          <Button loading={isLoading} type=\"primary\" htmlType=\"submit\" block>\r\n            登录\r\n          </Button>\r\n        </Item>\r\n      </Form>\r\n      <Divider></Divider>\r\n      <Button onClick={() => changeLoginState(false)} type=\"link\">\r\n        没有账号？注册新账号\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"98.0308675%\",\n  y1: \"0.160599572%\",\n  x2: \"58.8877062%\",\n  y2: \"40.7655246%\",\n  id: \"uid5\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"18%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: 1,\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.9366667,4 L11.41,4 C11.41,5.3800098 11.9582068,6.703498 12.934021,7.67931228 C13.9098353,8.65512657 15.2333235,9.20333333 16.6133333,9.20333333 L18.7366667,9.20333333 L18.7366667,11.2533333 C18.7385054,14.1244521 21.0655479,16.4514946 23.9366667,16.4533333 L23.9366667,5 C23.9366667,4.44771525 23.4889514,4 22.9366667,4 Z\",\n  fill: \"currentColor\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.2333333,9.74333333 L5.70666667,9.74333333 C5.70850536,12.6144521 8.03554792,14.9414946 10.9066667,14.9433333 L13.03,14.9433333 L13.03,17 C13.0336786,19.8711178 15.3622132,22.196669 18.2333333,22.1966667 L18.2333333,10.7433333 C18.2333333,10.1910486 17.7856181,9.74333333 17.2333333,9.74333333 Z\",\n  fill: \"url(#uid5)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.5266667,15.4833333 L0,15.4833333 C3.51929402e-16,18.357055 2.32961169,20.6866667 5.20333333,20.6866667 L7.33333333,20.6866667 L7.33333333,22.7366667 C7.33516565,25.6051863 9.65815176,27.9311544 12.5266667,27.9366667 L12.5266667,16.4833333 C12.5266667,15.9310486 12.0789514,15.4833333 11.5266667,15.4833333 Z\",\n  fill: \"url(#uid5)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M37.07,18.956 C37.07,20.646 36.394,21.842 34.418,21.842 C33.56,21.842 32.702,21.686 32,21.4 L32,23.662 C32.65,23.896 33.586,24.104 34.808,24.104 C38.032,24.104 39.41,21.946 39.41,18.8 L39.41,6.918 L37.07,6.918 L37.07,18.956 Z M42.894,7.568 C42.894,8.556 43.544,9.128 44.454,9.128 C45.364,9.128 46.014,8.556 46.014,7.568 C46.014,6.58 45.364,6.008 44.454,6.008 C43.544,6.008 42.894,6.58 42.894,7.568 Z M43.31,24 L45.546,24 L45.546,11 L43.31,11 L43.31,24 Z M48.926,24 L51.11,24 L51.11,16.33 C51.11,13.574 52.852,12.716 55.712,13.002 L55.712,10.818 C53.164,10.662 51.864,11.754 51.11,13.288 L51.11,11 L48.926,11 L48.926,24 Z M66.45,24 L66.45,21.66 C65.618,23.376 64.058,24.26 62.056,24.26 C58.598,24.26 56.856,21.322 56.856,17.5 C56.856,13.834 58.676,10.74 62.316,10.74 C64.214,10.74 65.67,11.598 66.45,13.288 L66.45,11 L68.686,11 L68.686,24 L66.45,24 Z M59.092,17.5 C59.092,20.62 60.34,22.18 62.654,22.18 C64.656,22.18 66.45,20.906 66.45,18.02 L66.45,16.98 C66.45,14.094 64.812,12.82 62.914,12.82 C60.392,12.82 59.092,14.484 59.092,17.5 Z\",\n  fillRule: \"evenodd\",\n  fill: \"inherit\"\n}));\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 69 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.8bb06c97.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.890da620.svg\";","import { Button, Divider, Form, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { ErrorBox } from \"../components/lib\";\r\nimport { VerifyInput } from \"../components/verifyInput\";\r\nimport { AuthForm, useUserRegister } from \"../utils/unauthenticated\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const RegisterScreen = ({\r\n  changeLoginState,\r\n}: {\r\n  changeLoginState: (a: boolean) => void;\r\n}) => {\r\n  const client = useQueryClient();\r\n\r\n  const { mutate: register, error, isLoading, isSuccess } = useUserRegister();\r\n  const handleRegister = (authForm: AuthForm) => {\r\n    register(authForm);\r\n  }\r\n  if(isSuccess) {\r\n    client.refetchQueries(\"checkLogin\");\r\n  }\r\n  return (\r\n    <div>\r\n      <Typography.Title level={3}>请注册</Typography.Title>\r\n      <ErrorBox error={error}/>\r\n      <Form onFinish={handleRegister}>\r\n        <VerifyInput\r\n          name=\"username\"\r\n          message=\"请输入用户名\"\r\n          placeholder=\"用户名\"\r\n        />\r\n        <VerifyInput\r\n          name=\"password\"\r\n          message=\"请输入密码\"\r\n          placeholder=\"密码\"\r\n          isPassword\r\n        />\r\n        <VerifyInput\r\n          name=\"confirmPassword\"\r\n          message=\"请确认密码\"\r\n          placeholder=\"请确认密码\"\r\n          isPassword\r\n          dependencies={['password']}\r\n          rules={[\r\n            ({ getFieldValue }) => ({\r\n              validator(_, val) {\r\n                console.log(111);\r\n                \r\n                if (val === getFieldValue(\"password\")) {\r\n                  return Promise.resolve();\r\n                } else {\r\n                  return Promise.reject(new Error(\"两次输入的密码不一致\"));\r\n                }\r\n              },\r\n            }),\r\n          ]}\r\n        />\r\n\r\n        <Item>\r\n          <Button loading={isLoading} type=\"primary\" htmlType=\"submit\" block>\r\n            注册\r\n          </Button>\r\n        </Item>\r\n      </Form>\r\n      <Divider />\r\n      <Button onClick={() => changeLoginState(true)} type=\"link\">\r\n        没有账号？注册新账号\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Card } from \"antd\";\r\nimport React from \"react\";\r\nimport { LoginScreen } from \"./login\";\r\nimport { ReactComponent as Logo } from \"../assets/logo.svg\";\r\nimport Left from \"../assets/left.svg\";\r\nimport Right from \"../assets/right.svg\";\r\nimport { useState } from \"react\";\r\nimport { RegisterScreen } from \"./register\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\n\r\nexport const UnauthenticatedSreen = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n\r\n  return (\r\n    <HelmetProvider>\r\n      <Container>\r\n        <Helmet>\r\n          <title>请登录注册以继续</title>\r\n        </Helmet>\r\n        <Background />\r\n        <Logo style={{ width: \"80px\", marginBottom: \"30px\" }} />\r\n        <ShadowCard>\r\n          {isLogin ? (\r\n            <LoginScreen changeLoginState={setIsLogin} />\r\n          ) : (\r\n            <RegisterScreen changeLoginState={setIsLogin} />\r\n          )}\r\n        </ShadowCard>\r\n      </Container>\r\n    </HelmetProvider>\r\n  );\r\n};\r\n\r\nconst Background = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  background-position: left bottom, right bottom;\r\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\r\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\r\n  background-image: url(${Left}), url(${Right});\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ShadowCard = styled(Card)`\r\n  padding: 30px;\r\n  width: 400px;\r\n  height: 558px;\r\n  text-align: center;\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\r\n`;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"97.6553341%\",\n  y1: \"35.6591143%\",\n  x2: \"37.202032%\",\n  y2: \"75.4891864%\",\n  id: \"uid392-1\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"7%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})), /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"8.43371138%\",\n  y1: \"60.1495759%\",\n  x2: \"64.1161517%\",\n  y2: \"23.5790285%\",\n  id: \"uid392-2\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"0%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: 1,\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z\",\n  fill: \"url(#uid392-1)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z\",\n  fill: \"url(#uid392-2)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z\",\n  fill: \"inherit\",\n  fillRule: \"evenodd\"\n}));\n\nfunction SvgSoftwareLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 179 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    className: \"css-sq9aeg-Logo\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSoftwareLogo);\nexport default __webpack_public_path__ + \"static/media/software-logo.8043cb5b.svg\";\nexport { ForwardRef as ReactComponent };","import styled from \"@emotion/styled\"\r\nimport { Spin } from \"antd\"\r\nimport React from \"react\"\r\nimport { ReactElement } from \"react\"\r\n\r\ntype SpinProps = React.ComponentProps<typeof Spin>\r\n\r\ntype ToggleLoadingProps = SpinProps & {\r\n    isLoading: boolean,\r\n    children: ReactElement\r\n}\r\n\r\nexport const ToggleLoading = ({isLoading, children, ...remindProps}: ToggleLoadingProps) => {\r\n    return isLoading ? <Container><Spin size={\"large\"} { ...remindProps } /></Container>: children\r\n}\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    justify-content: center;\r\n    align-items: center;\r\n`","import { List, Popover } from \"antd\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { ToggleLoading } from \"./loading\";\r\n\r\ntype ListProps = React.ComponentProps<typeof List>\r\n\r\ntype MyPropOverProps = ListProps & {\r\n    renderData: any[]| undefined,\r\n    title: string,\r\n    name: string,\r\n    callBack: (data: any) => ReactElement | null,\r\n    change ?: ((visible: boolean) => void),\r\n    isLoading?: boolean\r\n}\r\n\r\nexport const MyPopOver = ({ renderData, title, name, callBack, change,isLoading, ...props }: MyPropOverProps) => {\r\n    \r\n    return <Popover\r\n    onVisibleChange={change}\r\n    content={\r\n      <ToggleLoading isLoading={!!isLoading}>\r\n        <List\r\n        {...props}\r\n        style={{ width: \"300px\" }}\r\n        header={title}\r\n        dataSource={renderData}\r\n        renderItem={(data) => callBack(data)}\r\n      />\r\n      </ToggleLoading>\r\n    }\r\n  >\r\n    {name}\r\n  </Popover>\r\n}","import qs from \"qs\";\r\nimport { getToken, logout } from \"../auth-provider\";\r\n\r\ninterface Config extends RequestInit {\r\n  token?: string | null;\r\n  data?: object;\r\n}\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nexport const http = (\r\n  endpoint: string,\r\n  { token, data, ...costumConfig }: Config\r\n) => {\r\n  const config = {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : \"\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    ...costumConfig,\r\n  };\r\n  if (config.method.toUpperCase() === \"GET\") {\r\n    endpoint += `?${qs.stringify(data)}`;\r\n  } else {\r\n    config.body = JSON.stringify(data || {});\r\n  }\r\n\r\n  return fetch(`${apiUrl}/${endpoint}`, config).then(async (res) => {\r\n    const data = await res.json();\r\n    if (res.status === 401) {\r\n      await logout();\r\n      window.location.reload();\r\n    }\r\n    if (res.ok) {\r\n      return data;\r\n    }\r\n    return Promise.reject(data);\r\n  });\r\n};\r\n\r\nexport const useHttp = () => (endpoint: string, config?: Config) =>\r\n  http(endpoint, { ...config, token: getToken() });\r\n","import { message } from \"antd\";\r\nimport { QueryKey, useQueryClient } from \"react-query\";\r\n\r\nconst useConfig = (\r\n  queryKey: QueryKey,\r\n  callBack: (target: any, old?: any[]) => any[]\r\n) => {\r\n  const queryClient = useQueryClient();\r\n  return {\r\n    onSuccess() {\r\n      queryClient.invalidateQueries(queryKey);\r\n    },\r\n    onMutate(param: any) {\r\n      queryClient.cancelQueries(queryKey);\r\n      const oldParam = queryClient.getQueryData(queryKey);\r\n      queryClient.setQueryData(queryKey, (old?: any) => {\r\n        return callBack(param, old);\r\n      });\r\n      return oldParam;\r\n    },\r\n    onError(error: any, newItem: any, context: any) {\r\n      message.error(\"未知错误，请重新操作\");\r\n      queryClient.setQueryData(queryKey, context);\r\n    },\r\n  };\r\n};\r\n\r\nexport const useEditConfig = (queryKey: QueryKey) => useConfig(\r\n    queryKey,\r\n    (param, old) =>\r\n      old?.map((item) =>\r\n        item.id === param.id ? { ...item, ...param } : item\r\n      ) || []\r\n  );\r\n\r\n  \r\nexport const useAddConfig = (queryKey: QueryKey) => useConfig(\r\n  queryKey,\r\n  (param, old) => old ? [...old, param]: []\r\n);\r\n \r\nexport const useDeleteConfig = (queryKey: QueryKey) => useConfig(\r\n  queryKey,\r\n  (param, old) => old?.filter((item) => {\r\n    \r\n    return item.id !== param.id\r\n  }) || []\r\n);\r\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Project } from \"../types/project\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig, useEditConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useProject = (param?: Partial<Project>) => {\r\n  const client = useHttp();\r\n  return useQuery<Project[]>([\"project\", param], () =>\r\n    client(\"projects\", { data: param }),\r\n    {refetchOnWindowFocus: false}\r\n  );\r\n};\r\n\r\nexport const useEditProject = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects/${params.id}`, {\r\n        method: \"PATCH\",\r\n        data: params,\r\n      }),\r\n    useEditConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useAddProject = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useDeleteProject = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`projects/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDeleteConfig(queryKey)\r\n  );\r\n};","import { useEffect, useState } from \"react\";\r\nimport { getToken } from \"../auth-provider\";\r\nimport { http } from \"./http\";\r\nimport { useProjectIdInUrl } from \"./url\";\r\n\r\n\r\nexport const bootstrapUser = async () => {\r\n  let user = null;\r\n  const token = getToken();\r\n  if (token) {\r\n    const data = await http(\"me\", { token });\r\n    user = data.user;\r\n  }\r\n  return user;\r\n};\r\n\r\nexport const clearObj = (obj: {[key: string]: unknown}) => {\r\n  const newObj = {...obj};\r\n  Object.keys(obj).forEach((key) => {\r\n    if(obj[key] == null || obj[key] == \"\") {\r\n      delete newObj[key];\r\n    }\r\n  })\r\n  return newObj;\r\n}\r\n\r\nexport const resetRoute = () => (window.location.href = window.location.origin);\r\n\r\nexport const useDebounce = (param: any, delay=200) => {\r\n  const [newParam, setNewParam] = useState(param);\r\n  \r\n  useEffect(() => {\r\n    const timeId = setTimeout(() => {\r\n      setNewParam(param);\r\n    }, delay);\r\n    return () => clearTimeout(timeId);\r\n  }, [param, delay])\r\n\r\n  return newParam;\r\n}\r\n\r\nexport const useQueryParams = () => ({ projectId: useProjectIdInUrl() });","import { useMemo } from \"react\";\r\nimport { URLSearchParamsInit, useLocation, useSearchParams } from \"react-router-dom\";\r\nimport { clearObj } from \".\";\r\n\r\nexport const useUrlSearchParam = <K extends string>(keys: K[]) => {\r\n  const [param] = useSearchParams();\r\n  const setParam = useSetUrlParam();\r\n\r\n  const result = useMemo(\r\n    () =>\r\n      clearObj(\r\n        keys?.reduce(\r\n          (x, y) => ({\r\n            ...x,\r\n            [y]: param.get(y),\r\n          }),\r\n          {}\r\n        )\r\n      ) as {\r\n        [key in K]: string;\r\n      },\r\n    [param]\r\n  );\r\n  return [result, setParam] as const;\r\n};\r\n\r\nconst useSetUrlParam = () => {\r\n  const [searchParam, setSearchParam] = useSearchParams();\r\n  return (param: { [key: string]: unknown }) => {\r\n    setSearchParam(\r\n      clearObj({\r\n        ...Object.fromEntries(searchParam),\r\n        ...param,\r\n      }) as URLSearchParamsInit\r\n    );\r\n  };\r\n};\r\n\r\nexport const useProjectIdInUrl = () => {\r\n  const { pathname } = useLocation();\r\n  const id = pathname.match(/projects\\/(\\d+)/)?.[1];\r\n  return Number(id);\r\n};","import { useProject } from \"../../utils/project\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\n\r\nexport const useCreateDrawer = () => {\r\n  const [{ projectCreate }, setProjectCreate] = useUrlSearchParam([\r\n    \"projectCreate\",\r\n  ]);\r\n  const [{ editingProjectId }, setEditingProject] = useUrlSearchParam([\r\n    \"editingProjectId\",\r\n  ]);\r\n  \r\n  const openProjectCreate = () => {\r\n    setProjectCreate({\r\n      projectCreate: true\r\n    })\r\n  }\r\n\r\n  const openProjectEdit = (id: number) => {\r\n    setEditingProject({\r\n      editingProjectId: id\r\n    })\r\n  }\r\n  \r\n  const { data: project, isLoading, isError} = useProject({\r\n    id: Number(editingProjectId)\r\n  });\r\n  \r\n  const isDrawerOpen = !!(projectCreate || editingProjectId);\r\n\r\n  const close = () => {\r\n    setProjectCreate({\r\n      projectCreate: undefined,\r\n      editingProjectId: undefined,\r\n    });\r\n  };\r\n\r\n  return {\r\n    isDrawerOpen,\r\n    openProjectCreate,\r\n    openProjectEdit,\r\n    close,\r\n    editingProject: project? project[0] : undefined,\r\n    isLoading,\r\n    isError\r\n  };\r\n};\r\n","import { useQuery } from \"react-query\";\r\nimport { User } from \"../types/user\";\r\nimport { useHttp } from \"./http\";\r\n\r\nexport const useUsers = (param?: Partial<User>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<User[]>([\"users\", param], () =>\r\n    client(\"users\", { data: param }),\r\n    {refetchOnWindowFocus: false}\r\n  );\r\n};\r\n","import { Rate } from \"antd\";\r\nimport React from \"react\";\r\n\r\ninterface PinProps extends React.ComponentProps<typeof Rate> {\r\n  checked: boolean;\r\n  onCheckedChange?: (checked: boolean) => void;\r\n}\r\n\r\nexport const Pin = ({ checked, onCheckedChange, ...restProps }: PinProps) => {\r\n  return (\r\n    <Rate\r\n      count={1}\r\n      value={checked ? 1 : 0}\r\n      onChange={(num) => onCheckedChange?.(!!num)}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","import { Button, Dropdown, Menu, Table } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React from \"react\";\r\nimport { Pin } from \"../../components/pin\";\r\nimport { Project } from \"../../types/project\";\r\nimport { User } from \"../../types/user\";\r\nimport { useDeleteProject, useEditProject } from \"../../utils/project\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { useCreateDrawer } from \"./util\";\r\nimport { deleteConfirm, NoPaddingBtn } from \"../../components/lib\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst { Item } = Menu;\r\n\r\nexport const ProjectList = ({\r\n  projectList,\r\n  users,\r\n  isLoading,\r\n}: {\r\n  projectList: Project[];\r\n  users?: User[];\r\n  isLoading: boolean;\r\n}) => {\r\n  const [param] = useUrlSearchParam([\"personId\", \"name\"]);\r\n  const { mutate: editProject } = useEditProject([\"project\", {}]);\r\n  const { mutate: deleteProject } = useDeleteProject([\"project\", param]);\r\n\r\n  const { openProjectEdit } = useCreateDrawer();\r\n\r\n  return (\r\n    <Table\r\n      dataSource={projectList}\r\n      pagination={false}\r\n      rowKey={\"id\"}\r\n      loading={isLoading}\r\n      columns={[\r\n        {\r\n          title: <Pin checked={true} disabled={true} />,\r\n          render(_, project) {\r\n            return (\r\n              <Pin\r\n                checked={project.pin}\r\n                onChange={(val) =>\r\n                  editProject({\r\n                    ...project,\r\n                    pin: val === 1,\r\n                  })\r\n                }\r\n              />\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"名称\",\r\n          render(_, project) {\r\n            return <Link to={String(project.id)}>{project.name}</Link>;\r\n          },\r\n        },\r\n        {\r\n          title: \"部门\",\r\n          render(_, project) {\r\n            return <span>{project.organization}</span>;\r\n          },\r\n        },\r\n        {\r\n          title: \"负责人\",\r\n          render(_, project) {\r\n            return (\r\n              <span>\r\n                {users?.find((user) => user.id === project.personId)?.name || \"无\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          render(_, project) {\r\n            return (\r\n              <span>\r\n                {project.created\r\n                  ? dayjs(project.created).format(\"YYYY-MM-DD\")\r\n                  : \"无\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"\",\r\n          render(_, project) {\r\n            return (\r\n              <Dropdown\r\n                placement=\"topLeft\"\r\n                overlay={\r\n                  <Menu>\r\n                    <Item>\r\n                      <Button type=\"text\" onClick={() => openProjectEdit(project.id)}>\r\n                        编辑\r\n                      </Button>\r\n                    </Item>\r\n                    <Item>\r\n                      <Button\r\n                        type=\"text\"\r\n                        onClick={() =>\r\n                          deleteConfirm(\r\n                            () =>\r\n                              deleteProject({\r\n                                id: project.id,\r\n                              }),\r\n                            \"确定删除这个项目吗？\"\r\n                          )\r\n                        }\r\n                      >\r\n                        删除\r\n                      </Button>\r\n                    </Item>\r\n                  </Menu>\r\n                }\r\n              >\r\n                <NoPaddingBtn type={\"link\"}>...</NoPaddingBtn>\r\n              </Dropdown>\r\n            );\r\n          },\r\n        },\r\n      ]}\r\n    ></Table>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\"\r\nimport { Button } from \"antd\"\r\nimport React from \"react\"\r\nimport { useCreateDrawer } from \"./util\"\r\n\r\nexport const ListHeader = () => {\r\n    const { openProjectCreate } = useCreateDrawer();\r\n\r\n    return <Container>\r\n        <h1>项目列表</h1>\r\n        <Button type={\"link\"} onClick={() => openProjectCreate()}>创建项目</Button>\r\n    </Container>\r\n}\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: baseline;\r\n`","import { Select } from \"antd\";\r\nimport React from \"react\";\r\n\r\ntype SelectProps = React.ComponentProps<typeof Select>;\r\n\r\ninterface IdSelectProps extends Omit<SelectProps, \"onChange\" | \"value\"> {\r\n  value?: number | string | null;\r\n  defalutName: string;\r\n  valueKey: string;\r\n  onChange: (val?: number) => void;\r\n  renderData?: any[];\r\n  nameKey?: string;\r\n}\r\n\r\nconst { Option } = Select;\r\n\r\nexport const IdSelect = ({\r\n  renderData,\r\n  valueKey,\r\n  nameKey,\r\n  defalutName,\r\n  onChange,\r\n  value,\r\n  ...remindProps\r\n}: IdSelectProps) => {\r\n  return (\r\n    <Select\r\n      value={renderData?.length === 0 ? 0 : toNumber(value)}\r\n      {...remindProps}\r\n      defaultValue={0}\r\n      onChange={(value) => onChange(toNumber(value))}\r\n    >\r\n      <Option value={0}>{defalutName}</Option>\r\n      {renderData?.map((data) => (\r\n        <Option value={data[valueKey]} key={data.id}>\r\n          {data[nameKey ? nameKey : \"name\"]}\r\n        </Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\n\r\nconst toNumber = (val: unknown) => (isNaN(Number(val)) ? 0 : Number(val));\r\n","import styled from \"@emotion/styled\";\r\nimport { Form, Input } from \"antd\";\r\nimport React from \"react\";\r\nimport { IdSelect } from \"../../components/id-select\";\r\nimport { User } from \"../../types/user\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const SearchPanel = ({ users }: {users?: User[]}) => {\r\n  const [param, setParam] = useUrlSearchParam([\"personId\", \"name\"]);\r\n  \r\n  return (\r\n    <SearchPanelForm initialValues={param}>\r\n      <Item style={{ marginRight: \"25px\" }} name={\"name\"}>\r\n        <Input\r\n          placeholder={\"项目名\"}\r\n          onChange={(evt) => setParam({name: evt.target.value })}\r\n        />\r\n      </Item>\r\n      <Item name={\"personId\"}>\r\n        <IdSelect\r\n          renderData={users}\r\n          valueKey={\"id\"}\r\n          defalutName={\"负责人\"}\r\n          onChange={(val?: number) => setParam({ personId: String(val === 0 ? \"\" : val) })}\r\n        />\r\n      </Item>\r\n    </SearchPanelForm>\r\n  );\r\n};\r\n\r\nconst SearchPanelForm = styled(Form)`\r\n  display: flex;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport React from \"react\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\nimport { ErrorBox } from \"../../components/lib\";\r\nimport { ToggleLoading } from \"../../components/loading\";\r\nimport { clearObj, useDebounce } from \"../../utils\";\r\nimport { useProject } from \"../../utils/project\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { useUsers } from \"../../utils/user\";\r\nimport { ProjectList } from \"./list\";\r\nimport { ListHeader } from \"./list-header\";\r\nimport { SearchPanel } from \"./search-panel\";\r\n\r\nexport const ProjectListScreen = () => {\r\n  const [param] = useUrlSearchParam([\"personId\", \"name\"]);\r\n  const {\r\n    data: projectList,\r\n    isLoading: projectLoading,\r\n    isError: projectError,\r\n    error,\r\n  } = useProject(clearObj(useDebounce(param, 300)));\r\n  const { data: users, isLoading: userLoading } = useUsers();\r\n\r\n  const isProjectLoading = userLoading && projectLoading;\r\n\r\n  return (\r\n    <HelmetProvider>\r\n      <Helmet>\r\n        <title>项目列表</title>\r\n      </Helmet>\r\n      <Container>\r\n        <ListHeader />\r\n        <ToggleLoading\r\n          isLoading={isProjectLoading}\r\n          style={{ marginTop: \"40px\" }}\r\n        >\r\n          <DIV>\r\n            <SearchPanel users={users} />\r\n            {projectError ? <ErrorBox error={error} /> : null}\r\n            <ProjectList\r\n              projectList={projectList || []}\r\n              users={users}\r\n              isLoading={projectLoading}\r\n            />\r\n          </DIV>\r\n        </ToggleLoading>\r\n      </Container>\r\n    </HelmetProvider>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  padding: 28px 33px;\r\n`;\r\n\r\nconst DIV = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`;\r\nProjectListScreen.whyDidYouRender = false;\r\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { useQueryParams } from \".\";\r\nimport { Kanban } from \"../types/kanban\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useKanbans = (param?: Partial<Kanban>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<Kanban[]>([\"kanbans\", param], () =>\r\n    client(\"kanbans\", { data: param }),\r\n    {refetchOnWindowFocus: false}\r\n  );\r\n};\r\n\r\n\r\nexport const useAddKanban = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Kanban>) =>\r\n      client(`kanbans`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useDeleteKanban = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`kanbans/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDeleteConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useKanbanQueryKey = () => [\"kanbans\", useQueryParams()]","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Project } from \"../types/project\";\r\nimport { Task } from \"../types/task\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig, useEditConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useTasks = (param?: Partial<Task>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<Task[]>([\"tasks\", param], () =>\r\n    client(\"tasks\", { data: param }),\r\n    {refetchOnWindowFocus: false}\r\n  );\r\n};\r\n\r\nexport const useAddTask = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Task>) =>\r\n      client(`tasks`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useEditTask = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Task>) =>\r\n      client(`tasks/${params.id}`, {\r\n        method: \"PATCH\",\r\n        data: params,\r\n      }),\r\n    useEditConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useTask = (id?: number) => {\r\n  const client = useHttp();\r\n  return useQuery<Project>([\"task\", { id }], () => client(`tasks/${id}`), {\r\n    enabled: Boolean(id),\r\n    refetchOnWindowFocus: false\r\n  });\r\n};\r\n\r\nexport const useDeleteTask = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`tasks/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDeleteConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const taskQueryKey = (id: number) => [\"tasks\", { projectId: id }]","import { useQuery } from \"react-query\";\r\nimport { TaskType } from \"../types/task-type\";\r\nimport { useHttp } from \"./http\";\r\n\r\nexport const useTaskTypes = () => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<TaskType[]>([\"taskTypes\"], () => client(\"taskTypes\"), {\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n","import { useMemo } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport { clearObj } from \"../../utils\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\n\r\nexport const useRouteId = () => {\r\n  const units = useLocation().pathname.split(\"/\");\r\n  return units[2];\r\n};\r\n\r\nexport const useTaskParam = () => {\r\n  const projectId = +useRouteId();\r\n  const [param] = useUrlSearchParam([\r\n    \"processorId\",\r\n    \"name\",\r\n    \"typeId\",\r\n  ]);\r\n  const result = useMemo(\r\n    () =>\r\n      clearObj({\r\n        processorId: !!param.processorId ? +param.processorId: param.processorId,\r\n        name: param.name,\r\n        typeId: !!param.typeId ? +param.typeId: param.typeId,\r\n        projectId,\r\n      }),\r\n    [param, projectId]\r\n  );\r\n  return result;\r\n};\r\n","import { Button, Form, Input, Modal } from \"antd\";\r\nimport { useForm } from \"antd/lib/form/Form\";\r\nimport React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { IdSelect } from \"../../components/id-select\";\r\nimport { deleteConfirm } from \"../../components/lib\";\r\nimport { ToggleLoading } from \"../../components/loading\";\r\nimport {\r\n  useDeleteTask,\r\n  useEditTask,\r\n  useTask,\r\n} from \"../../utils/task\";\r\nimport { useTaskTypes } from \"../../utils/task-type\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { useUsers } from \"../../utils/user\";\r\nimport { useTaskParam } from \"./util\";\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\nconst { Item } = Form;\r\n\r\nexport const EditTaskModal = () => {\r\n  const { data: users } = useUsers();\r\n  const { data: taskType } = useTaskTypes();\r\n  const [{ editingTaskId }, setParam] = useUrlSearchParam([\"editingTaskId\"]);\r\n  const { data: editingTask, isLoading } = useTask(Number(editingTaskId));\r\n  const { mutateAsync, isLoading: editLoading } = useEditTask([\r\n    \"tasks\",\r\n    useTaskParam(),\r\n  ]);\r\n  const { mutateAsync: deleteTask } = useDeleteTask([\"tasks\", useTaskParam()]);\r\n\r\n  const [form] = useForm();\r\n\r\n  const handleClick = async () => {\r\n    const formVal = form.getFieldsValue();\r\n    await mutateAsync({ ...editingTask, ...formVal });\r\n    closeModal();\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    deleteConfirm(() => {\r\n      deleteTask({ id: +editingTaskId });\r\n    }, `确定删除该任务？`);\r\n    closeModal();\r\n  };\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingTask);\r\n  }, [form, editingTask]);\r\n\r\n  const closeModal = () =>\r\n    setParam({\r\n      editingTaskId: undefined,\r\n    });\r\n\r\n  return (\r\n    <Modal\r\n      title=\"编辑任务\"\r\n      visible={!!editingTaskId}\r\n      onCancel={() => closeModal()}\r\n      onOk={() => handleClick()}\r\n      confirmLoading={editLoading}\r\n      okText={\"确认\"}\r\n      cancelText={\"取消\"}\r\n    >\r\n      <ToggleLoading isLoading={isLoading} style={{ margin: \"auto\" }}>\r\n        <Form {...layout} form={form}>\r\n          <Item label={\"任务名\"} required name={\"name\"}>\r\n            <Input />\r\n          </Item>\r\n          <Item label={\"经办人\"} name={\"processorId\"}>\r\n            <IdSelect\r\n              renderData={users}\r\n              valueKey={\"id\"}\r\n              defalutName={\"经办人\"}\r\n              onChange={(val?: number) => {}}\r\n            />\r\n          </Item>\r\n          <Item label={\"类型\"} name={\"typeId\"}>\r\n            <IdSelect\r\n              renderData={taskType}\r\n              valueKey={\"id\"}\r\n              defalutName={\"类型\"}\r\n              onChange={(val?: number) => {}}\r\n            />\r\n          </Item>\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Button onClick={() => handleDeleteClick()}>删除</Button>\r\n          </div>\r\n        </Form>\r\n      </ToggleLoading>\r\n    </Modal>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/bug.bc7dca9d.svg\";","export default __webpack_public_path__ + \"static/media/task.8118694e.svg\";","import { Card, Input } from \"antd\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { NoPaddingBtn } from \"../../components/lib\";\r\nimport { useAddTask } from \"../../utils/task\";\r\nimport { useProjectIdInUrl } from \"../../utils/url\";\r\n\r\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\r\n  const projectId = useProjectIdInUrl();\r\n  const [isCreate, setIsCreate] = useState(false);\r\n\r\n  const { mutate: addKanban } = useAddTask([\"tasks\", { projectId }]);\r\n\r\n  const handleEnter = (name: string) => {\r\n    addKanban({\r\n      projectId,\r\n      name,\r\n      kanbanId,\r\n    });\r\n    setIsCreate(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {isCreate ? (\r\n        <Card>\r\n          <Input\r\n            placeholder={\"需要做些什么？\"}\r\n            autoFocus\r\n            onPressEnter={(evt) => handleEnter(evt.currentTarget.value)}\r\n            onBlur={() => setIsCreate(false)}\r\n          />\r\n        </Card>\r\n      ) : (\r\n        <NoPaddingBtn type={\"text\"} onClick={() => setIsCreate(true)}>\r\n          +创建事务\r\n        </NoPaddingBtn>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Button, Card, Dropdown, Menu } from \"antd\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { Task } from \"../../types/task\";\r\nimport BugIcon from \"../../assets/bug.svg\";\r\nimport TaskIcon from \"../../assets/task.svg\";\r\nimport { CreateTask } from \"./create-task\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { deleteConfirm, NoPaddingBtn } from \"../../components/lib\";\r\nimport { useDeleteKanban, useKanbanQueryKey } from \"../../utils/kanban\";\r\n\r\nexport const KanbanList = ({\r\n  name,\r\n  taskList,\r\n  kanbanId,\r\n}: {\r\n  name?: ReactElement;\r\n  taskList?: Task[];\r\n  kanbanId?: number;\r\n}) => {\r\n  const [, setParam] = useUrlSearchParam([\"editingTaskId\"]);\r\n  const { mutateAsync: deleteKanban, isLoading} = useDeleteKanban(useKanbanQueryKey());\r\n\r\n  return (\r\n    <KanbanListContainer>\r\n      <Span>\r\n        {name}\r\n        {!!taskList ? (\r\n          <Dropdown\r\n            placement=\"bottomLeft\"\r\n            overlay={\r\n              <Menu>\r\n                <Button\r\n                  type=\"text\"\r\n                  loading={isLoading}\r\n                  onClick={() =>\r\n                    deleteConfirm(() => {deleteKanban({id: kanbanId as number})}, \"确定删除看板吗？\")\r\n                  }\r\n                >\r\n                  删除\r\n                </Button>\r\n              </Menu>\r\n            }\r\n          >\r\n            <NoPaddingBtn type={\"link\"}>...</NoPaddingBtn>\r\n          </Dropdown>\r\n        ) : null}\r\n      </Span>\r\n      {taskList?.map((task) => (\r\n        <TaskCard\r\n          key={task.id}\r\n          onClick={() => setParam({ editingTaskId: task.id })}\r\n        >\r\n          <div>{task.name}</div>\r\n          <img alt={\"task-icon\"} src={task.typeId === 2 ? BugIcon : TaskIcon} />\r\n        </TaskCard>\r\n      ))}\r\n      {!!taskList ? <CreateTask kanbanId={kanbanId as number} /> : null}\r\n    </KanbanListContainer>\r\n  );\r\n};\r\n\r\n\r\nconst KanbanListContainer = styled.div`\r\n  padding: 10px 7px;\r\n  min-width: 270px;\r\n  margin-right: 15px;\r\n  border-radius: 10px;\r\n  background-color: #f4f5f7;\r\n  overflow: scroll;\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst TaskCard = styled(Card)`\r\n  margin-top: 10px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Span = styled.span`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n","import { Button, Form, Input } from \"antd\";\r\nimport { useForm } from \"antd/lib/form/Form\";\r\nimport React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { IdSelect } from \"../../components/id-select\";\r\nimport { useTaskTypes } from \"../../utils/task-type\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { useUsers } from \"../../utils/user\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const KanbanSearch = () => {\r\n  const [param, setParam] = useUrlSearchParam([\r\n    \"processorId\",\r\n    \"name\",\r\n    \"typeId\",\r\n  ]);\r\n  const { data: users } = useUsers();\r\n  const { data: taskType } = useTaskTypes();\r\n\r\n  const [form] = useForm();\r\n\r\n  const clearSearch = () => {\r\n    setParam({\r\n      processorId: undefined,\r\n      name: undefined,\r\n      typeId: undefined,\r\n    });\r\n    form.resetFields();\r\n  };\r\n\r\n  useEffect(() => form.setFieldsValue(param), [form, param]);\r\n\r\n  return (\r\n    <Form style={{ display: \"flex\" }} form={form}>\r\n      <Item name={\"name\"}>\r\n        <Input\r\n          placeholder={\"任务名\"}\r\n          onChange={(evt) => setParam({ name: evt.target.value })}\r\n        />\r\n      </Item>\r\n      <Item name={\"processorId\"} style={{ marginLeft: \"30px\" }}>\r\n        <IdSelect\r\n          renderData={users}\r\n          valueKey={\"id\"}\r\n          defalutName={\"经办人\"}\r\n          onChange={(val?: number) =>\r\n            setParam({ processorId: String(val === 0 ? \"\" : val) })\r\n          }\r\n        />\r\n      </Item>\r\n      <Item name={\"typeId\"} style={{ marginLeft: \"30px\" }}>\r\n        <IdSelect\r\n          renderData={taskType}\r\n          valueKey={\"id\"}\r\n          defalutName={\"类型\"}\r\n          onChange={(val?: number) =>\r\n            setParam({ typeId: String(val === 0 ? \"\" : val) })\r\n          }\r\n        />\r\n      </Item>\r\n      <Item style={{ marginLeft: \"30px\" }}>\r\n        <Button onClick={() => clearSearch()}>清除筛选器</Button>\r\n      </Item>\r\n    </Form>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Input } from \"antd\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\nimport { ToggleLoading } from \"../../components/loading\";\r\nimport { useDebounce, useQueryParams } from \"../../utils\";\r\nimport { useAddKanban, useKanbanQueryKey, useKanbans } from \"../../utils/kanban\";\r\nimport { useProject } from \"../../utils/project\";\r\nimport { useTasks } from \"../../utils/task\";\r\nimport { useProjectIdInUrl } from \"../../utils/url\";\r\nimport { EditTaskModal } from \"./edit-task\";\r\nimport { KanbanList } from \"./kanban-list\";\r\nimport { KanbanSearch } from \"./kanban-search-panel\";\r\nimport { useTaskParam } from \"./util\";\r\n\r\nexport const KanbanScreen = () => {\r\n  const id = useProjectIdInUrl();\r\n  const { data: kanbanData, isLoading: kanbanLoading } = useKanbans(useQueryParams());\r\n  const { data: taskData, isLoading: taskLoading } = useTasks(\r\n    useDebounce(useTaskParam())\r\n  );\r\n  const { data: projectData, isLoading: projectLoading } = useProject({\r\n    id: Number(id),\r\n  });\r\n\r\n  const isTotalLoading = kanbanLoading || taskLoading;\r\n  const [val, setVal] = useState(\"\");\r\n  \r\n  const { mutate: addKanban } = useAddKanban(useKanbanQueryKey());\r\n  const addKanbanEnter = (name: string) => {\r\n    addKanban({ name, projectId: id });\r\n    setVal(\"\");\r\n  };\r\n\r\n  return (\r\n    <HelmetProvider>\r\n      <Helmet>\r\n        <title>看板列表</title>\r\n      </Helmet>\r\n      <ToggleLoading isLoading={projectLoading}>\r\n      <KanbanContainer>\r\n        <h1>{projectData?.[0].name}看板</h1>\r\n        <KanbanSearch />\r\n        <ToggleLoading isLoading={isTotalLoading}>\r\n          <KanbanContainerList>\r\n            {kanbanData?.map((kanban) => (\r\n              <KanbanList\r\n                key={kanban.id}\r\n                name={<h3>{kanban.name}</h3>}\r\n                taskList={taskData?.filter(\r\n                  (task) => task.kanbanId === kanban.id\r\n                ) || []}\r\n                kanbanId={kanban.id}\r\n              />\r\n            ))}\r\n            <KanbanList\r\n              name={\r\n                <Input\r\n                  placeholder={\"新建看板名称\"}\r\n                  value={val}\r\n                  onChange={(evt) => setVal(evt.target.value)}\r\n                  onPressEnter={(evt) =>\r\n                    addKanbanEnter(evt.currentTarget.value)\r\n                  }\r\n                />\r\n              }\r\n            />\r\n          </KanbanContainerList>\r\n        </ToggleLoading>\r\n        <EditTaskModal />\r\n      </KanbanContainer>\r\n    </ToggleLoading>\r\n    </HelmetProvider>\r\n  );\r\n};\r\n\r\nconst KanbanContainer = styled.div`\r\nwidth: 100%;\r\n  padding: 30px 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst KanbanContainerList = styled.div`\r\nheight: 100%;\r\n  display: flex;\r\n  overflow: scroll hidden;\r\n`;\r\n","import { useQueryParams } from \"../../utils\";\r\n\r\nexport const useEpicsQueryKey = () => [\"epics\", useQueryParams()];","import styled from \"@emotion/styled\";\r\nimport { Button, Drawer, Input } from \"antd\";\r\nimport { Form } from \"antd\";\r\nimport { useForm } from \"antd/lib/form/Form\";\r\nimport React from \"react\";\r\nimport { useAddEpic } from \"../../utils/epic\";\r\nimport { useProjectIdInUrl } from \"../../utils/url\";\r\nimport { useEpicsQueryKey } from \"./util\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const CreateEpic = ({\r\n  isOpen,\r\n  setDrawerOpen,\r\n}: {\r\n  isOpen: boolean;\r\n  setDrawerOpen: () => void;\r\n}) => {\r\n  const { mutateAsync, isLoading } = useAddEpic(useEpicsQueryKey());\r\n  const projectId = useProjectIdInUrl();\r\n\r\n  const handleFinish = async (val: { name: string }) => {\r\n    await mutateAsync({ ...val, projectId });\r\n    setDrawerOpen();\r\n    \r\n    form.resetFields();\r\n  };\r\n\r\n  const [form] = useForm();\r\n\r\n  return (\r\n    <Drawer\r\n      visible={isOpen}\r\n      width={\"100%\"}\r\n      onClose={setDrawerOpen}\r\n      destroyOnClose={true}\r\n      forceRender={true}\r\n    >\r\n      <DrawerContainer>\r\n        <div style={{ width: \"400px\", textAlign: \"center\" }}>\r\n          <h1>创建任务组</h1>\r\n          <Form layout={\"vertical\"} onFinish={handleFinish} form={form}>\r\n            <Item\r\n              label={\"名称\"}\r\n              name={\"name\"}\r\n              required\r\n              rules={[{ required: true, message: \"\" }]}\r\n            >\r\n              <Input placeholder={\"请输入任务组名称\"} autoFocus />\r\n            </Item>\r\n            <Item style={{ textAlign: \"right\" }}>\r\n              <Button type={\"primary\"} htmlType={\"submit\"} loading={isLoading}>\r\n                提交\r\n              </Button>\r\n            </Item>\r\n          </Form>\r\n        </div>\r\n      </DrawerContainer>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nconst DrawerContainer = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Epic } from \"../types/epic\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useEpics = (param?: Partial<Epic>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<Epic[]>([\"epics\", param], () =>\r\n    client(\"epics\", { data: param }),\r\n    {refetchOnWindowFocus: false}\r\n  );\r\n};\r\n\r\nexport const useAddEpic = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Epic>) =>\r\n      client(`epics`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useDeleteEpic = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`epics/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDeleteConfig(queryKey)\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Button, List } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { deleteConfirm } from \"../../components/lib\";\r\nimport { Epic } from \"../../types/epic\";\r\nimport { Project } from \"../../types/project\";\r\nimport { Task } from \"../../types/task\";\r\nimport { useDeleteEpic } from \"../../utils/epic\";\r\nimport { useEpicsQueryKey } from \"./util\";\r\n\r\nconst { Item } = List;\r\n\r\nexport const EpicRow = ({ epic, tasks, currentProject }: { epic: Epic; tasks?: Task[], currentProject?: Project }) => {\r\n  const epicTasks = tasks?.filter((task) => task.epicId === epic.id);\r\n\r\n  const { mutateAsync } = useDeleteEpic(useEpicsQueryKey());\r\n\r\n  return (\r\n    <Item>\r\n      <EpicHead>\r\n        <span style={{ fontSize: \"18px\" }}>{epic.name}</span>\r\n        <Button\r\n          type={\"link\"}\r\n          onClick={() =>\r\n            deleteConfirm(\r\n              () => mutateAsync({ id: epic.id }),\r\n              `确定删除项目组：${epic.name}`\r\n            )\r\n          }\r\n        >\r\n          删除\r\n        </Button>\r\n      </EpicHead>\r\n      <Time>开始时间：{dayjs(epic.start).format(\"YYYY-MM-DD\")}</Time>\r\n      <Time>结束时间：{dayjs(epic.end).format(\"YYYY-MM-DD\")}</Time>\r\n      {epicTasks?.map((epicTask) => (\r\n        <Link\r\n        to={`/projects/${currentProject?.id}/kanban?editingTaskId=${epicTask.id}`}\r\n        key={epicTask.id}\r\n        style={{marginRight: \"20px\"}}\r\n      >{epicTask.name}</Link>\r\n      ))}\r\n    </Item>\r\n  );\r\n};\r\n\r\nconst EpicHead = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Time = styled.div`\r\n  color: #8f8f8f;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { Button, List } from \"antd\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\nimport { ToggleLoading } from \"../../components/loading\";\r\nimport { useQueryParams } from \"../../utils\";\r\nimport { useEpics } from \"../../utils/epic\";\r\nimport { useProject } from \"../../utils/project\";\r\nimport { useTasks } from \"../../utils/task\";\r\nimport { useProjectIdInUrl } from \"../../utils/url\";\r\nimport { CreateEpic } from \"./create-epic\";\r\nimport { EpicRow } from \"./epicRow\";\r\n\r\nexport const EpicScreen = () => {\r\n  const id = useProjectIdInUrl();\r\n\r\n  const { data: projectData, isLoading: projectLoading } = useProject({\r\n    id,\r\n  });\r\n\r\n  const { data: epics, isLoading: epicLoading } = useEpics(useQueryParams());\r\n  const { data: tasks, isLoading: taskLoading } = useTasks({ projectId: projectData?.[0]?.id });\r\n\r\n  const isLoading = epicLoading || taskLoading;\r\n\r\n  const [isCreateEpicOpen, setIsCreateEpicOpen] = useState(false);\r\n  const setDrawerOpen = () => setIsCreateEpicOpen(!isCreateEpicOpen);\r\n\r\n  return (\r\n    <HelmetProvider>\r\n      <Helmet>\r\n        <title>看板列表</title>\r\n      </Helmet>\r\n      <ToggleLoading isLoading={projectLoading}>\r\n        <EpicContainer>\r\n          <TotalEpicHeader>\r\n            <h1>{projectData?.[0].name}任务组</h1>\r\n            <Button type={\"link\"} onClick={() => setDrawerOpen()}>\r\n              创建任务组\r\n            </Button>\r\n          </TotalEpicHeader>\r\n          <div style={{ overflow: \"scroll\" }}>\r\n            <List\r\n              loading={isLoading}\r\n              dataSource={epics || []}\r\n              renderItem={(epic) => (\r\n                <EpicRow\r\n                  epic={epic}\r\n                  tasks={tasks}\r\n                  currentProject={projectData?.[0]}\r\n                />\r\n              )}\r\n              itemLayout={\"vertical\"}\r\n            ></List>\r\n          </div>\r\n          <CreateEpic isOpen={isCreateEpicOpen} setDrawerOpen={setDrawerOpen} />\r\n        </EpicContainer>\r\n      </ToggleLoading>\r\n    </HelmetProvider>\r\n  );\r\n};\r\n\r\nconst EpicContainer = styled.div`\r\n  padding: 30px 20px;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst TotalEpicHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n`;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Navigate, Route, Routes, useLocation } from \"react-router\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Menu } from \"antd\";\r\nimport { KanbanScreen } from \"../kanban\";\r\nimport { EpicScreen } from \"../epic\";\r\n\r\nconst useRouteType = () => {\r\n  const units = useLocation().pathname.split(\"/\");\r\n  return units[units.length - 1];\r\n};\r\n\r\n\r\nexport const ProjectScreen = () => {\r\n  const routeType = useRouteType();\r\n  return (\r\n    <Container>\r\n      <Aside>\r\n        <Menu mode={\"inline\"} selectedKeys={[routeType]}>\r\n          <Menu.Item key={\"kanban\"}>\r\n            <Link to={\"kanban\"}>看板</Link>\r\n          </Menu.Item>\r\n          <Menu.Item key={\"epic\"}>\r\n            <Link to={\"epic\"}>任务组</Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Aside>\r\n      <Main>\r\n        <Routes>\r\n          {/*projects/:projectId/kanban*/}\r\n          <Route path={\"/kanban\"} element={<KanbanScreen />} />\r\n          {/*projects/:projectId/epic*/}\r\n          <Route path={\"/epic\"} element={<EpicScreen />} />\r\n          <Navigate to={window.location.pathname + \"/kanban\"} replace={true} />\r\n        </Routes>\r\n      </Main>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Aside = styled.aside`\r\n  background-color: rgb(244, 245, 247);\r\n  display: flex;\r\n`;\r\n\r\nconst Main = styled.div`\r\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 16rem 1fr;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { message, Button, Drawer, Form, Input } from \"antd\";\r\nimport { useForm } from \"antd/lib/form/Form\";\r\nimport React, { useEffect } from \"react\";\r\nimport { IdSelect } from \"../../components/id-select\";\r\nimport { ToggleLoading } from \"../../components/loading\";\r\nimport { clearObj } from \"../../utils\";\r\nimport { useAddProject, useEditProject } from \"../../utils/project\";\r\nimport { useUrlSearchParam } from \"../../utils/url\";\r\nimport { useUsers } from \"../../utils/user\";\r\nimport { useCreateDrawer } from \"./util\";\r\n\r\nconst { Item } = Form;\r\n\r\nexport const CreateProjectDrawer = () => {\r\n  const {\r\n    isDrawerOpen,\r\n    close,\r\n    editingProject,\r\n    isLoading: projectLoading,\r\n  } = useCreateDrawer();\r\n  const { data } = useUsers();\r\n\r\n  const [param] = useUrlSearchParam([\"personId\", \"name\"]);\r\n\r\n  const drawerTitle = editingProject ? \"编辑项目\" : \"创建项目\";\r\n  const useDrawer = editingProject ? useEditProject : useAddProject;\r\n  \r\n  const { mutateAsync, isLoading } = useDrawer([\"project\", clearObj(param)]);\r\n\r\n  let [form] = useForm();\r\n\r\n  const handleFinish = (val: any) => {\r\n    mutateAsync({ ...editingProject, ...val }).then(\r\n      () => {\r\n        message.success(drawerTitle + \"成功\");\r\n        closeDrawer();\r\n      }\r\n    );\r\n  };\r\n  const closeDrawer = () => {\r\n    form.resetFields();\r\n    close();\r\n  };\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingProject);\r\n  }, [editingProject, form]);\r\n\r\n  return (\r\n    <Drawer\r\n      destroyOnClose={true}\r\n      visible={isDrawerOpen}\r\n      width={\"100%\"}\r\n      forceRender={true}\r\n      onClose={() => closeDrawer()}\r\n    >\r\n      <ToggleLoading isLoading={projectLoading}>\r\n        <Container>\r\n          <h1>{drawerTitle}</h1>\r\n          <Form layout={\"vertical\"} form={form} onFinish={handleFinish}>\r\n            <Item\r\n              label={\"名称\"}\r\n              name={\"name\"}\r\n              rules={[{ required: true, message: \"请输入项目名\" }]}\r\n              required\r\n            >\r\n              <Input placeholder={\"请输入项目名称\"} />\r\n            </Item>\r\n            <Item\r\n              label={\"部门\"}\r\n              name={\"organization\"}\r\n              rules={[{ required: true, message: \"请输入部门名\" }]}\r\n              required\r\n            >\r\n              <Input placeholder={\"请输入部门名\"} />\r\n            </Item>\r\n            <Item label={\"负责人\"} name={\"personId\"}>\r\n              <IdSelect\r\n                renderData={data}\r\n                defalutName={\"负责人\"}\r\n                valueKey={\"id\"}\r\n                onChange={() => {}}\r\n              />\r\n            </Item>\r\n\r\n            <Item style={{ textAlign: \"right\" }}>\r\n              <Button type={\"primary\"} htmlType={\"submit\"} loading={isLoading}>\r\n                提交\r\n              </Button>\r\n            </Item>\r\n          </Form>\r\n        </Container>\r\n      </ToggleLoading>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  margin: 150px auto;\r\n  width: 400px;\r\n  text-align: center;\r\n`;\r\n","import React from \"react\";\r\nimport { Navigate, Route, Routes } from \"react-router\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { ReactComponent as MainLogo } from \"./assets/software-logo.svg\";\r\nimport { MyPopOver } from \"./components/popOver\";\r\nimport { NoPaddingBtn } from \"./components/lib\";\r\nimport { Button, Dropdown, List, Menu } from \"antd\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { useProject } from \"./utils/project\";\r\nimport { useCreateDrawer } from \"./screens/project-list/util\";\r\nimport { useUsers } from \"./utils/user\";\r\nimport { ProjectListScreen } from \"./screens/project-list\";\r\nimport { ProjectScreen } from \"./screens/project\";\r\nimport { CreateProjectDrawer } from \"./screens/project-list/create-project-Drawer\";\r\nimport { logout } from \"./auth-provider\";\r\n\r\nconst { Item } = List;\r\n\r\nexport const AuthenticatedApp = () => {\r\n  return (\r\n    <Container>\r\n      <Router>\r\n        <PageHeader />\r\n        <Routes>\r\n          <Route path={\"/projects\"} element={<ProjectListScreen />} />\r\n          <Route path={\"/projects/:projectId/*\"} element={<ProjectScreen />} />\r\n          <Navigate to={\"/projects\"} />\r\n        </Routes>\r\n        <CreateProjectDrawer />\r\n      </Router>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport const PageHeader = () => {\r\n  const clientQuery = useQueryClient();\r\n  const userInfo = clientQuery.getQueryData<{ name: string }>(\"checkLogin\");\r\n  const { data: projects } = useProject({});\r\n  const { openProjectCreate } = useCreateDrawer();\r\n  const { data: users } = useUsers();\r\n\r\n  const userLogout = () => {\r\n    logout();\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <Header>\r\n      <HeaderLeft>\r\n        <Link to={\"/\"} style={{display: \"flex\"}}>\r\n          <MainLogo style={{ height: \"30px\" }} />\r\n        </Link>\r\n        <div style={{ marginLeft: \"20px\" }}>\r\n          <MyPopOver\r\n            renderData={projects}\r\n            title={\"收藏项目\"}\r\n            name={\"项目\"}\r\n            footer={\r\n              <NoPaddingBtn type={\"link\"} onClick={() => openProjectCreate()}>\r\n                创建项目\r\n              </NoPaddingBtn>\r\n            }\r\n            callBack={(data) => {\r\n              return data.pin ? <Item>{data.name}</Item> : null;\r\n            }}\r\n          ></MyPopOver>\r\n        </div>\r\n        <div style={{ marginLeft: \"20px\" }}>\r\n          <MyPopOver\r\n            renderData={users}\r\n            title={\"组员列表\"}\r\n            name={\"组员\"}\r\n            callBack={(data) => <Item>{data.name}</Item>}\r\n          ></MyPopOver>\r\n        </div>\r\n      </HeaderLeft>\r\n      <Dropdown\r\n        placement=\"topLeft\"\r\n        overlay={\r\n          <Menu>\r\n            <Item>\r\n              <Button type=\"text\" onClick={() => userLogout()}>\r\n                退出\r\n              </Button>\r\n            </Item>\r\n          </Menu>\r\n        }\r\n      >\r\n        <NoPaddingBtn type={\"link\"}>Hi, {userInfo?.name}</NoPaddingBtn>\r\n      </Dropdown>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  padding: 0 30px;\r\n  height: 65px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  box-shadow: 4px 0 5px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst HeaderLeft = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n","import './App.css';\r\nimport React from \"react\"\r\nimport { UnauthenticatedSreen } from './unauthenticated-app';\r\nimport { AuthenticatedApp } from './authenticated-app';\r\nimport { useQuery } from 'react-query';\r\nimport { bootstrapUser } from './utils';\r\nimport { Spin } from 'antd';\r\nimport styled from '@emotion/styled';\r\n\r\n\r\nfunction App() {\r\n  const { data: isUserLogin, isLoading } = useQuery(\"checkLogin\", bootstrapUser, {refetchOnWindowFocus: false});\r\n  \r\n  if(isLoading) {\r\n    return (\r\n      <Div>\r\n        <Spin size={\"large\"}></Spin>\r\n      </Div>\r\n    )\r\n  }\r\n  return (\r\n    <div>\r\n      {!!isUserLogin ? <AuthenticatedApp />: <UnauthenticatedSreen />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\nconst Div = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nApp.whyDidYouRender = false;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ReactNode } from \"react\";\r\nimport React from \"react\";\r\n\r\nexport const AuthProvider = ({children}: {children: ReactNode}) => {\r\n    return <div>{children}</div>\r\n}","import { ReactNode } from \"react\";\r\nimport { AuthProvider } from \"./auth_context\";\r\nimport { QueryClientProvider, QueryClient } from \"react-query\";\r\nimport React from \"react\"\r\n\r\nexport const AppProviders = ({ children }: { children: ReactNode }) => {\r\n  return (\r\n    <QueryClientProvider client={new QueryClient()}>\r\n      <AuthProvider>{children}</AuthProvider>\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n","import \"./wdyr\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { DevTools, loadServer } from \"jira-dev-tool\";\r\nimport \"antd/dist/antd.less\";\r\nimport { AppProviders } from \"./context/index\";\r\n\r\nloadServer(() =>\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n        <AppProviders>\r\n          <DevTools />\r\n          <App />\r\n        </AppProviders>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n  )\r\n);\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}