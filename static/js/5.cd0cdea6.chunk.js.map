{"version":3,"sources":["utils/user.ts","components/id-select.tsx","components/userSelect.tsx","screens/project-list/search-panel.tsx","components/pin.tsx","utils/url.ts","screens/project-list/util.ts","screens/project-list/list.tsx","screens/project-list/index.tsx","assets/software-logo.svg","utils/task.ts","screens/EpicScreen/util.ts","screens/EpicScreen/create-epic.tsx","utils/epic.ts","screens/EpicScreen/index.tsx","utils/task-type.ts","assets/task.svg","assets/bug.svg","screens/Kanban/util.ts","screens/Kanban/create-task.tsx","components/mask.tsx","screens/Kanban/kanban-column.tsx","utils/kanban.ts","screens/Kanban/create-kanban.tsx","components/task-type-select.tsx","screens/Kanban/search-panel.tsx","screens/Kanban/task-modal.tsx","screens/Kanban/index.tsx","screens/project/index.tsx","screens/project-list/project-modal.tsx","components/project-popover.tsx","components/user-popover.tsx","authenticated-app.tsx"],"names":["useUser","client","useHttp","useQuery","IdSelect","props","value","onChange","defaultOptionName","options","restProps","length","toNumber","undefined","Option","map","option","key","id","name","isNaN","Number","UserSelect","users","data","SearchPanel","param","setParam","style","marginBottom","layout","Item","placeholder","type","evt","target","personId","Pin","onCheckedChange","num","console","log","useUrlQueryParam","keys","setSearchParams","useSetUrlSearchParam","useSearchParams","searchParams","useMemo","reduce","prev","get","params","setSearchParam","o","cleanObject","Object","fromEntries","useProjectSearchParams","useProjectsQueryKey","useProjectModal","projectCreate","setprojectCreate","editingProjectId","setEditingProjectId","setUrlParams","useProject","editingProject","projectModalOpen","open","close","startEdit","isLoading","List","mutate","useEditProject","pagination","rowKey","columns","title","count","disabled","render","project","pin","sorter","a","b","localeCompare","to","dataIndex","find","user","created","dayjs","format","More","deleteMutate","useDeleteProject","overlay","onClick","Modal","confirm","content","okText","cancelText","onOk","confirmDeleteProject","ProjectListScreen","useDocumentTitle","useProjects","useDebounce","error","list","Container","justify","loading","dataSource","styled","div","_extends","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x1","y1","x2","y2","stopColor","offset","stroke","strokeWidth","fillRule","d","fill","SvgSoftwareLogo","_ref","svgRef","titleId","viewBox","xmlns","focusable","className","ref","ForwardRef","useTasks","useEpicSearchParams","projectId","useProjectIdInUrl","useEpicsQueryKey","CreateEpic","groupModalOpen","handleGroupModalClose","queryKey","useMutation","method","useAddConfig","useAddEpic","addEpic","Form","useForm","form","onFinish","values","useEffect","resetFields","forceRender","destroyOnClose","visible","width","onClose","label","rules","required","message","textAlign","htmlType","EpicScreen","currentProject","useProjectInUrl","epics","useEpics","tasks","deleteEpic","useDeleteConfig","useDeleteEpic","useState","epicCreateOpen","setEpicCreateOpen","between","overflow","itemLayout","renderItem","epic","Meta","delComfirmModal","description","start","end","filter","task","epicId","useTaskTypes","useKanbanSearchParams","useTaskSearchParams","typeId","processorId","tagId","useKanbansQueryKey","useTasksQueryKey","useTasksModal","editingTaskId","setEditingTaskId","enabled","useTask","editingTask","useCallback","CreateTask","kanbanId","setName","inputMode","setinputMode","addTask","useAddTask","mutateAsync","submit","toggle","onBlur","autoFocus","onPressEnter","currentTarget","cursor","Mark","keyword","arr","split","str","idx","color","KanbanColumn","kanban","allTasks","KanbanHead","TasksContainer","useDeleteKanban","TaskCard","TaskTypeIcon","taskType","alt","src","taskIcon","bugIcon","QuestionCircleTwoTone","CreateKanban","addKanban","useAddKanban","size","TaskTypeSelect","gap","labelCol","span","wrapperCol","TaskModal","taskDataLoading","useEditTask","editTask","editLoading","isVisible","getFieldsValue","setFieldsValue","useDeleteTasks","maskStyle","backgroundColor","onCancel","confirmLoading","initialValues","fontSize","KanbanScreen","useKanbans","kanbans","kanbanIsLoading","ColumnsContainer","ProjectScreen","selected","useLocation","pathname","match","Aside","flex","selectedKeys","Main","window","location","replace","path","element","aside","ProjectModal","useAddProject","mutateLoading","then","ProjectPopover","projects","pinnedProjects","ContentContainer","Text","placement","UserPopover","refetch","onVisibleChange","AuthenticatedApp","PageHeader","Header","HeaderLeft","resetRoute","HeaderRight","UserDropdown","useAuth","logout","e","preventDefault","main","Row"],"mappings":"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","file":"static/js/5.cd0cdea6.chunk.js","sourcesContent":["\r\nimport { useHttp } from \"./http\"\r\nimport { useQuery } from \"react-query\"\r\nimport { User } from \"../types/user\"\r\n\r\nexport const useUser = () => {\r\n    const client = useHttp()\r\n    \r\n    return useQuery<User[]>([\"users\"], () => (\r\n        client(\"users\")\r\n    ))\r\n}","import { Select } from \"antd\"\r\nimport { Raw } from \"../types\"\r\nimport React from \"react\"\r\n\r\ntype SelectProps = React.ComponentProps<typeof Select>\r\n\r\ninterface idSelectProps\r\n  extends Omit<\r\n    SelectProps,\r\n    \"value\" | \"onChange\" | \"defaultOptionName\" | \"options\"\r\n  > {\r\n  value?: Raw | undefined | null\r\n  onChange?: (value?: number) => void\r\n  defaultOptionName?: string\r\n  options?: { name: string; id: number }[]\r\n}\r\n\r\nexport const IdSelect = (props: idSelectProps) => {\r\n  const { value, onChange, defaultOptionName, options, ...restProps } = props\r\n  return (\r\n    <Select\r\n      value={options?.length ? toNumber(value) : 0}\r\n      onChange={(value) => onChange?.(toNumber(value) || undefined)}\r\n      {...restProps}\r\n    >\r\n      {defaultOptionName ? (\r\n        <Select.Option value={0}>{defaultOptionName}</Select.Option>\r\n      ) : null}\r\n      {options?.map((option) => (\r\n        <Select.Option key={option.id} value={option.id}>\r\n          {option.name}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  )\r\n}\r\n\r\nconst toNumber = (value: unknown) => {\r\n  return isNaN(Number(value)) ? 0 : Number(value)\r\n}\r\n","import React from \"react\"\r\nimport { useUser } from \"../utils/user\"\r\nimport { IdSelect } from \"./id-select\"\r\n\r\nexport const UserSelect = (props: React.ComponentProps<typeof IdSelect>) => {\r\n    const {data: users} = useUser()\r\n    return <IdSelect options={users || []} {...props} />\r\n}","import { Input, Form } from \"antd\"\r\nimport { UserSelect } from \"../../components/userSelect\"\r\nimport { Project } from \"../../types/project\"\r\nimport React from \"react\"\r\n\r\n\r\ninterface SearchPanelProps {\r\n    param: Partial<Pick<Project, \"name\"| \"personId\">>,\r\n    setParam: (param: SearchPanelProps[\"param\"]) => void;\r\n}\r\nexport const SearchPanel = ({ param, setParam }: SearchPanelProps) => {\r\n    \r\n    return <Form style={{marginBottom: \"2rem\"}} layout={\"inline\"}>\r\n        <Form.Item>\r\n            <Input placeholder={\"项目名\"} type=\"text\" value={param.name} onChange={evt => setParam({\r\n                ...param,\r\n                name: evt.target.value\r\n            })} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <UserSelect value={param.personId} onChange={value => {setParam({\r\n                ...param,\r\n                personId: value\r\n            })}} defaultOptionName={\"负责人\"}/>\r\n        </Form.Item>\r\n    </Form>\r\n}\r\n\r\n// SearchPanel.whyDidYouRender = true","import { Rate } from 'antd'\r\nimport React from 'react'\r\n\r\ninterface PinProps extends React.ComponentProps<typeof Rate> {\r\n    onCheckedChange?: (checked:boolean) => void\r\n}\r\n\r\nexport const Pin = (props: PinProps) => {\r\n    const { onCheckedChange, ...restProps} = props\r\n    return <Rate {...restProps} onChange={num => {console.log(num);\r\n    ;onCheckedChange?.(!!num)}}/>\r\n}","import { useMemo } from \"react\"\r\nimport { URLSearchParamsInit, useSearchParams } from \"react-router-dom\"\r\nimport { cleanObject } from \".\"\r\n\r\nexport const useUrlQueryParam = <K extends string>(keys: K[]) => {\r\n  const setSearchParams = useSetUrlSearchParam();\r\n  const [searchParams] = useSearchParams()\r\n  const result = useMemo(\r\n    () =>\r\n      keys.reduce((prev, key) => {\r\n        return { ...prev, [key]: searchParams.get(key) || \"\" }\r\n      }, {} as { [key in K]: string }),\r\n    [searchParams]\r\n  )\r\n\r\n  return [\r\n    result,\r\n    (params: Partial<{ [key in K]: unknown }>) => {\r\n      return setSearchParams(params);\r\n    },\r\n  ] as const\r\n}\r\n\r\nexport const useSetUrlSearchParam = () => {\r\n  const [searchParams, setSearchParam] = useSearchParams();\r\n  return (params: { [key in string]: unknown }) => {\r\n    const o = cleanObject({\r\n      ...Object.fromEntries(searchParams),\r\n      ...params,\r\n    }) as URLSearchParamsInit;\r\n    return setSearchParam(o);\r\n  };\r\n};","import { useMemo } from \"react\";\r\nimport { cleanObject } from \"../../utils\";\r\nimport { useProject } from \"../../utils/project\";\r\nimport { useSetUrlSearchParam, useUrlQueryParam } from \"../../utils/url\";\r\n\r\nexport const useProjectSearchParams = () => {\r\n  const [param, setParam] = useUrlQueryParam([\"name\", \"personId\"]);\r\n  // return projectsParam\r\n  return [\r\n    useMemo(() => {\r\n      return cleanObject({ ...param, personId: Number(param.personId) || undefined });\r\n    }, [param]),\r\n    setParam,\r\n  ] as const;\r\n};\r\n\r\nexport const useProjectsQueryKey = () => {\r\n  const [param] = useProjectSearchParams();\r\n  return [\"projects\", param]\r\n}\r\n\r\nexport const useProjectModal = () => {\r\n  const [{ projectCreate }, setprojectCreate] = useUrlQueryParam([\r\n    \"projectCreate\",\r\n  ]);\r\n  const [{ editingProjectId }, setEditingProjectId] = useUrlQueryParam([\r\n    \"editingProjectId\"\r\n  ])\r\n  \r\n  const setUrlParams = useSetUrlSearchParam();\r\n  const { data: editingProject, isLoading } = useProject(Number(editingProjectId))\r\n\r\n  const open = () =>\r\n    setprojectCreate({\r\n      projectCreate: true,\r\n    });\r\n\r\n  const close = () => {\r\n    setUrlParams({\r\n      projectCreate: undefined,\r\n      editingProjectId: undefined\r\n    })\r\n  }\r\n  \r\n  const startEdit = (id: number) => setEditingProjectId({\r\n    editingProjectId: id\r\n  })\r\n\r\n  return {\r\n    projectModalOpen: projectCreate === \"true\" || !!editingProjectId,\r\n    open,\r\n    close,\r\n    startEdit,\r\n    isLoading,\r\n    editingProject\r\n  }\r\n};","import { Dropdown, Menu, Table, TableProps, Modal } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Pin } from \"../../components/pin\";\r\nimport { useDeleteProject, useEditProject } from \"../../utils/project\";\r\nimport { ButtonNoPadding } from \"../../components/lib\";\r\nimport { useProjectModal, useProjectsQueryKey } from \"./util\";\r\nimport { Project } from \"../../types/project\";\r\nimport { User } from \"../../types/user\";\r\nimport React from \"react\"\r\n\r\n\r\ninterface ListProps extends TableProps<Project> {\r\n  users: User[];\r\n}\r\n\r\nexport const List = ({ users, ...props }: ListProps) => {\r\n  const { mutate } = useEditProject(useProjectsQueryKey());\r\n  const pinPoject = (id: number) => (pin: boolean) => mutate({ id, pin });\r\n  return (\r\n    <Table\r\n      pagination={false}\r\n      rowKey={\"id\"}\r\n      columns={[\r\n        {\r\n          title: <Pin value={1} count={1} disabled={true}></Pin>,\r\n          render(value, project) {\r\n            return (\r\n              <Pin\r\n                count={1}\r\n                value={project.pin ? 1 : 0}\r\n                onCheckedChange={pinPoject(project.id)}\r\n              ></Pin>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"名称\",\r\n          sorter: (a, b) => a.name.localeCompare(b.name),\r\n          render(value, project) {\r\n            return <Link to={`${project.id}`}>{project.name}</Link>;\r\n          },\r\n        },\r\n        {\r\n          title: \"部门\",\r\n          dataIndex: \"organization\",\r\n        },\r\n        {\r\n          title: \"负责人\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {users.find((user) => user.id === project.personId)?.name ||\r\n                  \"未知\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {project.created\r\n                  ? dayjs(project.created).format(\"YYYY-MM-DD\")\r\n                  : \"无\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          render(value, project) {\r\n            return (\r\n              <More project={project}></More>\r\n            )\r\n              \r\n          },\r\n        },\r\n      ]}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nconst More = ({project}: {project: Project}) => {\r\n  \r\n  const { mutate: deleteMutate } = useDeleteProject(useProjectsQueryKey());\r\n  const { startEdit } = useProjectModal();\r\n  const editProject = (id: number) => () => startEdit(id);\r\n  const confirmDeleteProject = (id: number) => {\r\n    Modal.confirm({\r\n      title: '确定删除这个项目吗？',\r\n      content: '点击确定删除',\r\n      okText: \"确定\",\r\n      cancelText: \"取消\",\r\n      onOk() {\r\n        deleteMutate({id});\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu>\r\n          <Menu.Item key={\"edit\"}>\r\n            <ButtonNoPadding type=\"link\" onClick={editProject(project.id)}>\r\n              编辑\r\n            </ButtonNoPadding>\r\n          </Menu.Item>\r\n          <Menu.Item key={\"delete\"}>\r\n            <ButtonNoPadding\r\n              type=\"link\"\r\n              onClick={() => {\r\n                confirmDeleteProject(project.id);\r\n              }}\r\n            >\r\n              删除\r\n            </ButtonNoPadding>\r\n          </Menu.Item>\r\n        </Menu>\r\n      }\r\n    >\r\n      <ButtonNoPadding type=\"link\">...</ButtonNoPadding>\r\n    </Dropdown>\r\n  );\r\n};\r\n","import { SearchPanel } from \"./search-panel\";\r\nimport { List } from \"./list\";\r\nimport { useDebounce, useDocumentTitle } from \"../../utils\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Row } from \"antd\";\r\nimport { useProjects } from \"../../utils/project\";\r\nimport { useUser } from \"../../utils/user\";\r\nimport { useProjectModal, useProjectSearchParams } from \"./util\";\r\nimport { ButtonNoPadding, ErrorBox } from \"../../components/lib\";\r\nimport React from \"react\"\r\n\r\nexport const ProjectListScreen = () => {\r\n  useDocumentTitle(\"项目列表\", false);\r\n  const [param, setParam] = useProjectSearchParams();\r\n  const { isLoading, error, data: list } = useProjects(useDebounce(param, 200));\r\n  const { data: users } = useUser();\r\n  const { open } = useProjectModal();\r\n  return (\r\n    <Container>\r\n      <Row justify={\"space-between\"}>\r\n        <h1>项目列表</h1>\r\n        <ButtonNoPadding type=\"link\" onClick={() => open()}>\r\n          创建项目\r\n        </ButtonNoPadding>\r\n      </Row>\r\n      <SearchPanel param={param} setParam={setParam}></SearchPanel>\r\n      <ErrorBox error={error}></ErrorBox>\r\n      <List\r\n        loading={isLoading}\r\n        users={users || []}\r\n        dataSource={list || []}\r\n      ></List>\r\n    </Container>\r\n  );\r\n};\r\n\r\n// ProjectListScreen.whyDidYouRender = true\r\n\r\nconst Container = styled.div`\r\n  padding: 3.2rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n`;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"97.6553341%\",\n  y1: \"35.6591143%\",\n  x2: \"37.202032%\",\n  y2: \"75.4891864%\",\n  id: \"uid392-1\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"7%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})), /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"8.43371138%\",\n  y1: \"60.1495759%\",\n  x2: \"64.1161517%\",\n  y2: \"23.5790285%\",\n  id: \"uid392-2\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"0%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: 1,\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z\",\n  fill: \"url(#uid392-1)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z\",\n  fill: \"url(#uid392-2)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z\",\n  fill: \"inherit\",\n  fillRule: \"evenodd\"\n}));\n\nfunction SvgSoftwareLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 179 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    className: \"css-sq9aeg-Logo\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSoftwareLogo);\nexport default __webpack_public_path__ + \"static/media/software-logo.8043cb5b.svg\";\nexport { ForwardRef as ReactComponent };","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Task } from \"../types/task\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useTasks = (param?: Partial<Task>) => {\r\n  const client = useHttp();\r\n  return useQuery<Task[], Error>([\"tasks\", param], () =>\r\n    client(\"tasks\", { data: param })\r\n  );\r\n};\r\n\r\nexport const useAddTask = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n  return useMutation(\r\n    (params: Partial<Task>) =>\r\n      client(`tasks`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useTask = (id?: number) => {\r\n  const client = useHttp();\r\n  return useQuery<Task>(\r\n    [\"task\",  id ],\r\n    () => client(`tasks/${id}`),\r\n    { enabled: !!id }\r\n  ); \r\n};\r\n\r\n\r\nexport const useDeleteTasks = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n  return useMutation(\"tasks\", ({ id }: {id: number}) => client(`tasks/${id}`, {\r\n      method: \"DELETE\",\r\n    }),\r\n    useDeleteConfig(queryKey)\r\n  ) \r\n}","import { useProjectIdInUrl } from \"../../utils\";\r\n\r\nexport const useEpicSearchParams = () => ({ projectId: useProjectIdInUrl() });\r\n\r\nexport const useEpicsQueryKey = () => [\"epics\", useEpicSearchParams()];\r\n","import styled from \"@emotion/styled\";\r\nimport { Button, Drawer, Form, Input } from \"antd\";\r\nimport { useEffect } from \"react\";\r\nimport { ErrorBox } from \"../../components/lib\";\r\nimport { useProjectIdInUrl } from \"../../utils\";\r\nimport { useAddEpic } from \"../../utils/epic\";\r\nimport { useEpicsQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const CreateEpic = ({\r\n  groupModalOpen,\r\n  handleGroupModalClose,\r\n}: {\r\n  groupModalOpen: boolean;\r\n  handleGroupModalClose: () => void;\r\n}) => {\r\n  const { mutate: addEpic, isLoading, error } = useAddEpic(useEpicsQueryKey());\r\n  const [form] = Form.useForm();\r\n  const projectId = useProjectIdInUrl();\r\n\r\n  const onFinish = async (values: any) => {\r\n    await addEpic({...values, projectId});\r\n    handleGroupModalClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    form.resetFields();\r\n  }, [form, groupModalOpen, handleGroupModalClose]);\r\n\r\n  return (\r\n    <Drawer\r\n      forceRender={true}\r\n      destroyOnClose={true}\r\n      visible={groupModalOpen}\r\n      width={\"100%\"}\r\n      onClose={handleGroupModalClose}\r\n    >\r\n      <Container>\r\n        <h1>创建任务组</h1>\r\n        <ErrorBox error={error} />\r\n        <Form\r\n          form={form}\r\n          layout={\"vertical\"}\r\n          style={{ width: \"40rem\" }}\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            label=\"名称\"\r\n            name=\"name\"\r\n            rules={[{ required: true, message: \"请输入任务组名\" }]}\r\n          >\r\n            <Input placeholder=\"请输入任务组名称\" />\r\n          </Form.Item>\r\n          <Form.Item style={{ textAlign: \"right\" }}>\r\n            <Button loading={isLoading} type=\"primary\" htmlType=\"submit\">\r\n              提交\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Container>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Epic } from \"../types/epic\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useEpics = (param?: Partial<Epic>) => {\r\n  const client = useHttp();\r\n  return useQuery<Epic[], Error>([\"epics\", param], () =>\r\n    client(\"epics\", { data: param })\r\n  );\r\n};\r\n\r\nexport const useAddEpic = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n    (params: Partial<Epic>) =>\r\n      client(`epics`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n}\r\n\r\nexport const useDeleteEpic = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n  return useMutation(\"epics\", ({ id }: {id: number}) => client(`epics/${id}`, {\r\n      method: \"DELETE\",\r\n    }),\r\n    useDeleteConfig(queryKey)\r\n  ) \r\n}","import { Button, List } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Row, ScreenContainer } from \"../../components/lib\";\r\nimport { delComfirmModal, useProjectInUrl } from \"../../utils\";\r\nimport { useDeleteEpic, useEpics } from \"../../utils/epic\";\r\nimport { useTasks } from \"../../utils/task\";\r\nimport { CreateEpic } from \"./create-epic\";\r\nimport { useEpicSearchParams, useEpicsQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const EpicScreen = () => {\r\n  const { data: currentProject } = useProjectInUrl();\r\n  const { data: epics } = useEpics(useEpicSearchParams());\r\n  const { data: tasks } = useTasks({ projectId: currentProject?.id });\r\n  const { mutate: deleteEpic } = useDeleteEpic(useEpicsQueryKey());\r\n\r\n  const [epicCreateOpen, setEpicCreateOpen] = useState(false);\r\n\r\n  return (\r\n    <ScreenContainer>\r\n      <Row between={true}>\r\n        <h1>{currentProject?.name}看板</h1>\r\n        <Button onClick={() => setEpicCreateOpen(true)} type=\"link\">\r\n          创建任务组\r\n        </Button>\r\n      </Row>\r\n      <List\r\n        style={{ overflow: \"scroll\" }}\r\n        dataSource={epics}\r\n        itemLayout={\"vertical\"}\r\n        renderItem={(epic) => (\r\n          <List.Item>\r\n            <List.Item.Meta\r\n              title={\r\n                <Row between={true}>\r\n                  <span>{epic.name}</span>\r\n                  <Button\r\n                    type=\"link\"\r\n                    onClick={() =>\r\n                      delComfirmModal(\r\n                        deleteEpic,\r\n                        epic.id,\r\n                        `确定删除项目组：${epic.name}`,\r\n                        \"点击确定删除\"\r\n                      )\r\n                    }\r\n                  >\r\n                    删除\r\n                  </Button>\r\n                </Row>\r\n              }\r\n              description={\r\n                <div>\r\n                  <div>开始时间: {dayjs(epic.start).format(\"YYYY-MM-DD\")}</div>\r\n                  <div>结束时间: {dayjs(epic.end).format(\"YYYY-MM-DD\")}</div>\r\n                </div>\r\n              }\r\n            />\r\n            <div>\r\n              {tasks\r\n                ?.filter((task) => task.epicId === epic.id)\r\n                .map((task) => (\r\n                  <Link\r\n                    key={task.id}\r\n                    to={`/projects/${currentProject?.id}/kanban?editingTaskId=${task.id}`}\r\n                  >\r\n                    {task.name}\r\n                  </Link>\r\n                ))}\r\n            </div>\r\n          </List.Item>\r\n        )}\r\n      />\r\n      <CreateEpic\r\n        groupModalOpen={epicCreateOpen}\r\n        handleGroupModalClose={() => setEpicCreateOpen(false)}\r\n      />\r\n    </ScreenContainer>\r\n  );\r\n};\r\n","import { useQuery } from \"react-query\";\r\nimport { TaskType } from \"../screens/Kanban/task-type\";\r\nimport { useHttp } from \"./http\";\r\n\r\nexport const useTaskTypes = () => {\r\n  const client = useHttp();\r\n  return useQuery<TaskType[]>([\"taskTypes\"], () =>\r\n    client(\"taskTypes\")\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/task.8118694e.svg\";","export default __webpack_public_path__ + \"static/media/bug.bc7dca9d.svg\";","import { useCallback, useMemo } from \"react\";\r\nimport { useProjectIdInUrl } from \"../../utils\";\r\nimport { useTask } from \"../../utils/task\";\r\nimport { useUrlQueryParam } from \"../../utils/url\";\r\n\r\nexport const useKanbanSearchParams = () => ({ projectId: useProjectIdInUrl() });\r\n\r\nexport const useTaskSearchParams = () => {\r\n  const [param] = useUrlQueryParam([\"name\", \"typeId\", \"processorId\", \"tagId\"]);\r\n  const projectId = useProjectIdInUrl();\r\n  return useMemo(\r\n    () => ({\r\n      projectId,\r\n      typeId: Number(param.typeId) || undefined,\r\n      processorId: Number(param.processorId) || undefined,\r\n      tagId: Number(param.tagId) || undefined,\r\n      name: param.name,\r\n    }),\r\n    [projectId, param]\r\n  );\r\n};\r\n\r\nexport const useKanbansQueryKey = () => [\"kanbans\", useKanbanSearchParams()];\r\n\r\nexport const useTasksQueryKey = () => [\"tasks\", useTaskSearchParams()];\r\n\r\nexport const useTasksModal = () => {\r\n  const [{ editingTaskId }, setEditingTaskId] = useUrlQueryParam([\r\n    \"editingTaskId\",\r\n  ]);\r\n  const { data: editingTask, isLoading } = useTask(Number(editingTaskId));\r\n\r\n  const startEdit = useCallback(\r\n    (id: number) => {\r\n      setEditingTaskId({ editingTaskId: id });\r\n    },\r\n    [setEditingTaskId]\r\n  );\r\n\r\n  const close = useCallback(() => {\r\n    setEditingTaskId({ editingTaskId: undefined });\r\n  }, [setEditingTaskId]);\r\n\r\n  return {\r\n    editingTaskId,\r\n    editingTask,\r\n    isLoading,\r\n    startEdit,\r\n    close,\r\n  };\r\n};\r\n","import { Card, Input } from \"antd\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useProjectIdInUrl } from \"../../utils\";\r\nimport { useAddTask } from \"../../utils/task\";\r\nimport { useTasksQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [inputMode, setinputMode] = useState(false);\r\n\r\n  const projectId = useProjectIdInUrl();\r\n  const { mutateAsync: addTask } = useAddTask(useTasksQueryKey());\r\n\r\n  const submit = async () => {\r\n    setName(\"\");\r\n    setinputMode(false);\r\n    await addTask({\r\n      kanbanId,\r\n      projectId,\r\n      name,\r\n    });\r\n  };\r\n  const toggle = () => setinputMode(!inputMode);\r\n\r\n  useEffect(() => {\r\n      if(!inputMode) {\r\n          setName(\"\");\r\n      }\r\n  }, [inputMode]);\r\n\r\n  return (\r\n    <>\r\n      {inputMode ? (\r\n        <Card style={{ marginBottom: \"0.5rem\" }}>\r\n          <Input\r\n            placeholder=\"需要做些什么？\"\r\n            onBlur={toggle}\r\n            autoFocus\r\n            onPressEnter={submit}\r\n            value={name}\r\n            onChange={(evt) => setName(evt.currentTarget.value)}\r\n          />\r\n        </Card>\r\n      ) : (\r\n        <div style={{cursor: \"pointer\"}} onClick={toggle}>+创建事务</div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\n","import React from \"react\"\r\nexport const Mark = ({ name, keyword }: { name: string; keyword: string }) => {\r\n  if (!keyword) return <>{name}</>;\r\n  const arr = name.split(keyword);\r\n  return (\r\n    <>\r\n      {arr.map((str, idx) => (\r\n        <span key={idx}>\r\n          {str}\r\n          {idx === arr.length - 1 ? null : (\r\n            <span style={{ color: \"#257AFD\" }}>{keyword}</span>\r\n          )}\r\n        </span>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n","import { Kanban } from \"../../types/kanban\";\r\nimport { useTasks } from \"../../utils/task\";\r\nimport { useTaskTypes } from \"../../utils/task-type\";\r\nimport taskIcon from \"../../assets/task.svg\";\r\nimport bugIcon from \"../../assets/bug.svg\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Button, Card, Dropdown, Menu } from \"antd\";\r\nimport { useKanbansQueryKey, useTaskSearchParams, useTasksModal } from \"./util\";\r\nimport { delComfirmModal, useDebounce } from \"../../utils\";\r\nimport { CreateTask } from \"./create-task\";\r\nimport { QuestionCircleTwoTone } from \"@ant-design/icons\";\r\nimport { Task } from \"../../types/task\";\r\nimport { Mark } from \"../../components/mask\";\r\nimport { useDeleteKanban } from \"../../utils/kanban\";\r\nimport React from \"react\"\r\n\r\nexport const KanbanColumn = ({ kanban }: { kanban: Kanban }) => {\r\n  const param = useTaskSearchParams();\r\n\r\n  const { data: allTasks } = useTasks(useDebounce(param, 200));\r\n\r\n  const { id, name } = kanban;\r\n  const tasks = allTasks?.filter((task) => task.kanbanId === id);\r\n\r\n  return (\r\n    <Container>\r\n      <KanbanHead>\r\n        <h3>{name}</h3>\r\n        <More kanban={kanban} />\r\n      </KanbanHead>\r\n      <TasksContainer>\r\n        {tasks?.map((task) => (\r\n          <TaskCard task={task} key={task.id} />\r\n        ))}\r\n        <CreateTask kanbanId={id} />\r\n      </TasksContainer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst More = ({ kanban }: { kanban: Kanban }) => {\r\n  const { mutate } = useDeleteKanban(useKanbansQueryKey());\r\n  \r\n  const startEdit = () => {\r\n    delComfirmModal(mutate, kanban.id, \"确定删除看板吗？\");\r\n  };\r\n\r\n  const overlay = (\r\n    <Menu>\r\n      <Menu.Item>\r\n        <Button onClick={startEdit} type=\"link\">删除</Button>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <Dropdown overlay={overlay}>\r\n      <Button type=\"link\">...</Button>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nconst TaskCard = ({ task }: { task: Task }) => {\r\n  const { startEdit } = useTasksModal();\r\n  const { name: keyword } = useTaskSearchParams();\r\n  return (\r\n    <Card\r\n      style={{ marginBottom: \"0.5rem\", cursor: \"pointer\" }}\r\n      key={task.id}\r\n      onClick={() => startEdit(task.id)}\r\n    >\r\n      <p>\r\n        <Mark keyword={keyword} name={task.name} />\r\n      </p>\r\n      <TaskTypeIcon id={task.typeId} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst TaskTypeIcon = ({ id }: { id: number }) => {\r\n  const { data: taskType } = useTaskTypes();\r\n  const name = taskType?.find((type) => type.id === id)?.name;\r\n\r\n  if (!name) {\r\n    return <QuestionCircleTwoTone />;\r\n  } else {\r\n    return (\r\n      <img alt={\"task-icon\"} src={name === \"task\" ? taskIcon : bugIcon}></img>\r\n    );\r\n  }\r\n};\r\n\r\nconst KanbanHead = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  min-width: 27rem;\r\n  border-radius: 6px;\r\n  background-color: rgb(244, 245, 247);\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0.7rem 0.7rem 1rem;\r\n  margin-right: 1.5rem;\r\n`;\r\n\r\nexport const TasksContainer = styled.div`\r\n  overflow: scroll;\r\n  flex: 1;\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`;\r\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { Kanban } from \"../types/kanban\";\r\nimport { useHttp } from \"./http\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useKanbans = (param?: Partial<Kanban>) => {\r\n  const client = useHttp();\r\n  return useQuery<Kanban[], Error>([\"kanbans\", param], () =>\r\n    client(\"kanbans\", { data: param })\r\n  );\r\n};\r\n\r\nexport const useAddKanban = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n  return useMutation(\r\n    (params: Partial<Kanban>) =>\r\n      client(`kanbans`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useDeleteKanban = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n  return useMutation(\"kanbans\", ({ id }: {id: number}) => client(`kanbans/${id}`, {\r\n      method: \"DELETE\",\r\n    }),\r\n    useDeleteConfig(queryKey)\r\n  ) \r\n}","import { Input } from \"antd\";\r\nimport { useState } from \"react\";\r\nimport { useProjectIdInUrl } from \"../../utils\";\r\nimport { useAddKanban } from \"../../utils/kanban\";\r\nimport { Container } from \"./kanban-column\";\r\nimport { useKanbansQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const CreateKanban = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const projectId = useProjectIdInUrl();\r\n  const { mutateAsync: addKanban } = useAddKanban(useKanbansQueryKey());\r\n\r\n  const submit = async () => {\r\n    setName(\"\");\r\n    await addKanban({\r\n      projectId,\r\n      name,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Input\r\n        size=\"large\"\r\n        placeholder=\"新建看板名称\"\r\n        onPressEnter={submit}\r\n        value={name}\r\n        onChange={(evt) => setName(evt.currentTarget.value)}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTaskTypes } from \"../utils/task-type\";\r\nimport { IdSelect } from \"./id-select\";\r\n\r\nexport const TaskTypeSelect = (\r\n  props: React.ComponentProps<typeof IdSelect>\r\n) => {\r\n  const { data: taskType } = useTaskTypes();\r\n  return <IdSelect options={taskType || []} {...props} />;\r\n};\r\n","import { Button, Input } from \"antd\";\r\nimport { Row } from \"../../components/lib\";\r\nimport { TaskTypeSelect } from \"../../components/task-type-select\";\r\nimport { UserSelect } from \"../../components/userSelect\";\r\nimport { useSetUrlSearchParam } from \"../../utils/url\";\r\nimport { useTaskSearchParams } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const SearchPanel = () => {\r\n  const searchParams = useTaskSearchParams(); \r\n  const setSearchParams = useSetUrlSearchParam();\r\n  const reset = () =>\r\n    setSearchParams({\r\n      typeId: undefined,\r\n      processorId: undefined,\r\n      tagId: undefined,\r\n      name: undefined,\r\n    });\r\n\r\n  return (\r\n    <Row marginBottom={4} gap={true}>\r\n      <Input\r\n        style={{ width: \"20rem\" }}\r\n        placeholder=\"任务名\"\r\n        value={searchParams.name}\r\n        onChange={(evt) =>\r\n          setSearchParams({\r\n            name: evt.target.value,\r\n          })\r\n        }\r\n      />\r\n      <UserSelect\r\n        defaultOptionName=\"经办人\"\r\n        value={searchParams.processorId}\r\n        onChange={(value) => {\r\n          setSearchParams({\r\n            processorId: value,\r\n          });\r\n        }}\r\n      />\r\n      <TaskTypeSelect\r\n        defaultOptionName=\"类型\"\r\n        value={searchParams.typeId}\r\n        onChange={(value) => {\r\n          setSearchParams({\r\n            typeId: value,\r\n          });\r\n        }}\r\n      />\r\n      <Button onClick={reset}>清除筛选器</Button>\r\n    </Row>\r\n  );\r\n};\r\n","import { Button, Form, Input, Modal, Spin } from \"antd\";\r\nimport { useEffect } from \"react\";\r\nimport { TaskTypeSelect } from \"../../components/task-type-select\";\r\nimport { UserSelect } from \"../../components/userSelect\";\r\nimport { delComfirmModal } from \"../../utils\";\r\nimport { useEditTask } from \"../../utils/project\";\r\nimport { useDeleteTasks } from \"../../utils/task\";\r\nimport { useTasksModal, useTasksQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\n\r\nexport const TaskModal = () => {\r\n  const [form] = Form.useForm();\r\n  const {\r\n    editingTaskId,\r\n    close,\r\n    editingTask,\r\n    isLoading: taskDataLoading,\r\n  } = useTasksModal();\r\n  const { mutateAsync: editTask, isLoading: editLoading } = useEditTask(\r\n    useTasksQueryKey()\r\n  );\r\n\r\n  const isVisible = editingTaskId !== \"\";\r\n\r\n  const onCancel = () => {\r\n    close();\r\n    form.resetFields();\r\n  };\r\n\r\n  const onOk = async () => {\r\n    await editTask({ ...editingTask, ...form.getFieldsValue() });\r\n    close();\r\n  };\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingTask);\r\n  }, [editingTask, form]);\r\n\r\n  const { mutate } = useDeleteTasks(useTasksQueryKey());\r\n  const startEdit = () => {\r\n    delComfirmModal(mutate, Number(editingTaskId), \"确定删除任务吗？\");\r\n    close();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"编辑任务\"\r\n      cancelText={\"取消\"}\r\n      visible={isVisible}\r\n      maskStyle={{ backgroundColor: \"rgba(0, 0, 0, 0.1)\" }}\r\n      onCancel={onCancel}\r\n      onOk={onOk}\r\n      confirmLoading={editLoading}\r\n      forceRender\r\n    >\r\n      {taskDataLoading ? (\r\n        <Spin size=\"large\" />\r\n      ) : (\r\n        <Form {...layout} initialValues={editingTask} form={form}>\r\n          <Form.Item\r\n            label=\"任务名\"\r\n            name={\"name\"}\r\n            rules={[{ required: true, message: \"请输入任务名\" }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item label=\"经办人\" name={\"processorId\"}>\r\n            <UserSelect defaultOptionName=\"经办人\" />\r\n          </Form.Item>\r\n          <Form.Item label=\"类型\" name={\"typeId\"}>\r\n            <TaskTypeSelect defaultOptionName=\"类型\" />\r\n          </Form.Item>\r\n        </Form>\r\n      )}\r\n      <div style={{ textAlign: \"right\" }}>\r\n        <Button style={{ fontSize: \"14px\" }} size=\"small\" onClick={startEdit}>\r\n          删除\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Spin } from \"antd\";\r\nimport { ScreenContainer } from \"../../components/lib\";\r\nimport { useDebounce, useDocumentTitle, useProjectInUrl } from \"../../utils\";\r\nimport { useKanbans } from \"../../utils/kanban\";\r\nimport { useTasks } from \"../../utils/task\";\r\nimport { CreateKanban } from \"./create-kanban\";\r\nimport { KanbanColumn } from \"./kanban-column\";\r\nimport { SearchPanel } from \"./search-panel\";\r\nimport { TaskModal } from \"./task-modal\";\r\nimport {\r\n  useKanbanSearchParams,\r\n  useTaskSearchParams,\r\n} from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const KanbanScreen = () => {\r\n  useDocumentTitle(\"看板列表\");\r\n\r\n  const { data: kanbans, isLoading: kanbanIsLoading } = useKanbans(\r\n    useKanbanSearchParams()\r\n  );\r\n  const { data: currentProject } = useProjectInUrl();\r\n  const { isLoading: taskIsLoading } = useTasks(\r\n    useDebounce(useTaskSearchParams(), 200)\r\n  );\r\n\r\n  const isLoading = taskIsLoading || kanbanIsLoading;\r\n\r\n  return (\r\n    <ScreenContainer>\r\n      <h1>{currentProject?.name}看板</h1>\r\n      <SearchPanel></SearchPanel>\r\n      {isLoading ? (\r\n        <Spin size=\"large\" />\r\n      ) : (\r\n        <>\r\n          <ColumnsContainer>\r\n            {kanbans?.map((kanban) => (\r\n              <KanbanColumn key={kanban.id} kanban={kanban} />\r\n            ))}\r\n            <CreateKanban />\r\n          </ColumnsContainer>\r\n          <TaskModal />\r\n        </>\r\n      )}\r\n    </ScreenContainer>\r\n  );\r\n};\r\n\r\n// KanbanScreen.whyDidYouRender = true\r\n\r\nexport const ColumnsContainer = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  overflow-x: scroll;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { Menu } from \"antd\";\r\nimport { Link, Route, Routes, Navigate, useLocation } from \"react-router-dom\";\r\nimport { EpicScreen } from \"../EpicScreen\";\r\nimport { KanbanScreen } from \"../Kanban\";\r\nimport React from \"react\"\r\n\r\nexport const ProjectScreen = () => {\r\n  const { pathname } = useLocation();\r\n  const selected = pathname.match(/\\/projects\\/\\d+\\/(.+)/)?.[1];\r\n\r\n  return (\r\n    <Container>\r\n      <Aside>\r\n        <Menu style={{ flex: 1 }} selectedKeys={selected ? [selected] : []}>\r\n          <Menu.Item key=\"kanban\">\r\n            <Link to={\"kanban\"}>看板</Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"epic\">\r\n            <Link to={\"epic\"}>任务组</Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Aside>\r\n      <Main>\r\n        <Routes>\r\n          <Navigate to={window.location.pathname + \"/kanban\"} replace={true} />\r\n          <Route path={\"/kanban\"} element={<KanbanScreen />} />\r\n          <Route path={\"/epic\"} element={<EpicScreen />} />\r\n        </Routes>\r\n      </Main>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Aside = styled.aside`\r\n  background-color: rgb(244, 245, 247);\r\n  display: flex;\r\n`;\r\n\r\nconst Main = styled.div`\r\n  display: flex;\r\n  overflow: hidden;\r\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 10em 1fr;\r\n  height: 100%;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { Button, Drawer, Form, Input } from \"antd\";\r\nimport { useEffect } from \"react\";\r\nimport { ErrorBox, FullPageLoading } from \"../../components/lib\";\r\nimport { UserSelect } from \"../../components/userSelect\";\r\nimport { useAddProject, useEditProject } from \"../../utils/project\";\r\nimport { useProjectModal, useProjectsQueryKey } from \"./util\";\r\nimport React from \"react\"\r\n\r\nexport const ProjectModal = () => {\r\n  const { projectModalOpen, close, isLoading, editingProject } =\r\n    useProjectModal();\r\n  \r\n  const useMutateProject = editingProject ? useEditProject : useAddProject;\r\n  const { mutateAsync, error, isLoading: mutateLoading } = useMutateProject(useProjectsQueryKey());\r\n  const [form] = Form.useForm();\r\n  const onFinish = (values: {name: string, organization: string, personId: number}) => {\r\n    mutateAsync({...editingProject, ...values}).then(() => {\r\n      form.resetFields()\r\n      close()\r\n    })\r\n  };\r\n  \r\n  const closeModal = () => {\r\n    form.resetFields();\r\n    close();\r\n  }\r\n\r\n  const title = editingProject ? \"编辑项目\": \"创建项目\";\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingProject)\r\n  }, [editingProject, form])\r\n  \r\n  return (\r\n    <Drawer\r\n      forceRender={true}\r\n      onClose={closeModal}\r\n      visible={projectModalOpen}\r\n      width={\"100%\"}\r\n    >\r\n      {isLoading ? (\r\n        <FullPageLoading />\r\n      ) : (\r\n        <Container>\r\n          <h1>{title}</h1>\r\n          <ErrorBox error={error} />\r\n          <Form form={form} layout={\"vertical\"} style={{width:\"40rem\"}} onFinish={onFinish}>\r\n            <Form.Item label=\"名称\" name=\"name\" rules={[{required: true, message:\"请输入项目名\"}]}>\r\n              <Input placeholder=\"请输入项目名称\"/>\r\n            </Form.Item>\r\n            <Form.Item label=\"部门\" name=\"organization\" rules={[{required: true, message:\"请输入部门名\"}]}>\r\n              <Input placeholder=\"请输入部门名称\"/>\r\n            </Form.Item>\r\n            <Form.Item label=\"负责人\" name=\"personId\">\r\n              <UserSelect defaultOptionName=\"负责人\"></UserSelect>\r\n            </Form.Item>\r\n            <Form.Item style={{textAlign: \"right\"}}>\r\n              <Button loading={mutateLoading} type=\"primary\" htmlType=\"submit\">提交</Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Container>\r\n      )}\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n`","import styled from \"@emotion/styled\";\r\nimport { Divider, List, Popover, Typography } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useProjectModal } from \"../screens/project-list/util\";\r\nimport { useProjects } from \"../utils/project\";\r\nimport { ButtonNoPadding } from \"./lib\";\r\nimport React from \"react\"\r\n\r\nexport const ProjectPopover = () => {\r\n  const { data: projects } = useProjects({\"name\":\"\"});\r\n  const pinnedProjects = projects?.filter((project) => project.pin);\r\n  const { open } = useProjectModal();\r\n\r\n  const content = (\r\n    <ContentContainer>\r\n      <Typography.Text type=\"secondary\">收藏项目</Typography.Text>\r\n      <List>\r\n        {pinnedProjects?.map((project) => (\r\n          <List.Item key={project.id}>\r\n            <List.Item.Meta title={<Link to={`/projects/${project.id}`}>{project.name}</Link>} />\r\n          </List.Item>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n\r\n      <ButtonNoPadding type=\"link\" onClick={() => open()}>\r\n        创建项目\r\n      </ButtonNoPadding>\r\n    </ContentContainer>\r\n  );\r\n  return (\r\n    <Popover content={content} placement={\"bottom\"}>\r\n      <span>项目</span>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { Divider, List, Popover, Typography } from \"antd\";\r\nimport { useUser } from \"../utils/user\";\r\nimport React from \"react\"\r\n\r\nexport const UserPopover = () => {\r\n  const { data: users, refetch } = useUser();\r\n\r\n  const content = (\r\n    <ContentContainer>\r\n      <Typography.Text type=\"secondary\">组员列表</Typography.Text>\r\n      <List>\r\n        {users?.map((user) => (\r\n          <List.Item key={user.id}>\r\n            <List.Item.Meta title={user.name} />\r\n          </List.Item>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n\r\n    </ContentContainer>\r\n  );\r\n  return (\r\n    <Popover onVisibleChange={() => refetch()} content={content} placement={\"bottom\"}>\r\n      <span>组员</span>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n","import { ProjectListScreen } from \"./screens/project-list\";\r\nimport { useAuth } from \"./context/auth_context\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Row } from \"./components/lib\";\r\nimport { ReactComponent as SoftwareLogo } from \"./assets/software-logo.svg\";\r\nimport { Dropdown, Menu, Button } from \"antd\";\r\nimport { ProjectScreen } from \"./screens/project\";\r\nimport { Navigate, Route, Routes } from \"react-router\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { resetRoute } from \"./utils\";\r\nimport { ProjectModal } from \"./screens/project-list/project-modal\";\r\nimport { ProjectPopover } from \"./components/project-popover\";\r\nimport { ButtonNoPadding } from \"./components/lib\";\r\nimport { UserPopover } from \"./components/user-popover\";\r\nimport React from \"react\"\r\n\r\nexport default function AuthenticatedApp() {\r\n  return (\r\n    <Container>\r\n      <Router>\r\n        <PageHeader></PageHeader>\r\n        <Main>\r\n          <Routes>\r\n            <Navigate to={\"/projects\"} />\r\n            <Route\r\n              path={\"/projects\"}\r\n              element={\r\n                <ProjectListScreen />\r\n              }\r\n            />\r\n            <Route\r\n              path={\"/projects/:projectId/*\"}\r\n              element={<ProjectScreen />}\r\n            />\r\n          </Routes>\r\n        </Main>\r\n        <ProjectModal />\r\n      </Router>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst PageHeader = () => {\r\n  return (\r\n    <Header between>\r\n      <HeaderLeft gap={true}>\r\n        <ButtonNoPadding type={\"link\"} onClick={resetRoute}>\r\n          <SoftwareLogo width={\"18rem\"} color={\"rgb(38, 132, 255)\"} />\r\n        </ButtonNoPadding>\r\n        <ProjectPopover />\r\n        <UserPopover />\r\n      </HeaderLeft>\r\n      <HeaderRight>\r\n        <UserDropdown></UserDropdown>\r\n      </HeaderRight>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst UserDropdown = () => {\r\n  const { logout, user } = useAuth();\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu>\r\n          <Menu.Item key={\"logout\"}>\r\n            <Button\r\n              onClick={() => {\r\n                logout();\r\n              }}\r\n              type={\"link\"}\r\n            >\r\n              登出\r\n            </Button>\r\n          </Menu.Item>\r\n        </Menu>\r\n      }\r\n    >\r\n      <Button type={\"link\"} onClick={(e) => e.preventDefault()}>\r\n        Hi, {user?.name}\r\n      </Button>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-rows: 6rem 1fr;\r\n  grid-template-columns: 20rem 1fr 20rem;\r\n  grid-template-areas:\r\n    \"header header header\"\r\n    \"main main main\";\r\n  height: 100vh;\r\n`;\r\n\r\nconst Main = styled.main`\r\n  grid-area: main;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Header = styled(Row)`\r\n  grid-area: header;\r\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1;\r\n`;\r\n\r\nconst HeaderLeft = styled(Row)`\r\n  padding: 3.2rem;\r\n`;\r\nconst HeaderRight = styled.div`\r\n  padding: 3.2rem;\r\n`;\r\n"],"sourceRoot":""}